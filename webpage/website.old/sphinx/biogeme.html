

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Package description &mdash; Biogeme 3.2.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to Biogeme’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Biogeme
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Package description</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.biogeme">biogeme.biogeme module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.database">biogeme.database module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.distributions">biogeme.distributions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.draws">biogeme.draws module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.exceptions">biogeme.exceptions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.expressions">biogeme.expressions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.filenames">biogeme.filenames module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.loglikelihood">biogeme.loglikelihood module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.messaging">biogeme.messaging module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.models">biogeme.models module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.optimization">biogeme.optimization module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.results">biogeme.results module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.tools">biogeme.tools module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-biogeme.version">biogeme.version module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Biogeme</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Package description</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/biogeme.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-biogeme">
<span id="package-description"></span><h1>Package description<a class="headerlink" href="#module-biogeme" title="Permalink to this headline">¶</a></h1>
<p>Biogeme is a open source Python package designed for the maximum likelihood estimation of parametric models in general, with a special emphasis on discrete choice models.</p>
<div class="section" id="module-biogeme.biogeme">
<span id="biogeme-biogeme-module"></span><h2>biogeme.biogeme module<a class="headerlink" href="#module-biogeme.biogeme" title="Permalink to this headline">¶</a></h2>
<p>Implementation of the main Biogeme class that combines the database and the model specification.</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Tue Mar 26 16:45:15 2019</p>
</dd>
</dl>
<dl class="class">
<dt id="biogeme.biogeme.BIOGEME">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.biogeme.</code><code class="sig-name descname">BIOGEME</code><span class="sig-paren">(</span><em class="sig-param">database</em>, <em class="sig-param">formulas</em>, <em class="sig-param">numberOfThreads=None</em>, <em class="sig-param">numberOfDraws=1000</em>, <em class="sig-param">seed=None</em>, <em class="sig-param">skipAudit=False</em>, <em class="sig-param">removeUnusedVariables=True</em>, <em class="sig-param">missingData=99999</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Main class that combines the database and the model specification.</p>
<p>It works in two modes: estimation and simulation.</p>
<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">database</em>, <em class="sig-param">formulas</em>, <em class="sig-param">numberOfThreads=None</em>, <em class="sig-param">numberOfDraws=1000</em>, <em class="sig-param">seed=None</em>, <em class="sig-param">skipAudit=False</em>, <em class="sig-param">removeUnusedVariables=True</em>, <em class="sig-param">missingData=99999</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database</strong> (<em>biogeme.database</em>) – choice data.</p></li>
<li><p><strong>formulas</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a><em>, or </em><em>dict</em><em>(</em><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a><em>)</em>) – expression or dictionary of expressions that
define the model specification.  The concept is that each
expression is applied to each entry of the database. The
keys of the dictionary allow to provide a name to each
formula.  In the estimation mode, two formulas are
needed, with the keys ‘loglike’ and ‘weight’. If only one
formula is provided, it is associated with the label
‘loglike’. If no formula is labeled ‘weight’, the weight
of each piece of data is supposed to be 1.0. In the
simulation mode, the labels of each formula are used as
labels of the resulting database.</p></li>
<li><p><strong>numberOfThreads</strong> (<em>int</em>) – multi-threading can be used for
estimation. This parameter defines the number of threads
to be used. If the parameter is set to None, the number of
available threads is calculated using
cpu_count(). Ignored in simulation mode. Defaults: None.</p></li>
<li><p><strong>numberOfDraws</strong> (<em>int</em>) – number of draws used for Monte-Carlo
integration. Default: 1000.</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – seed used for the pseudo-random number
generation. It is useful only when each run should
generate the exact same result. If None, a new seed is
used at each run. Default: None.</p></li>
<li><p><strong>skipAudit</strong> (<em>bool</em>) – if True, does not check the validity of the
formulas. It may save significant amount of time for large
models and large data sets. Default: False.</p></li>
<li><p><strong>removeUnusedVariables</strong> (<em>bool</em>) – if True, all variables not used
in the expression are removed from the database. Default:
True.</p></li>
<li><p><strong>missingData</strong> (<em>float</em>) – if one variable has this value, it is
assumed that a data is missing and an exception will be
triggered. Default: 99999.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.calculateInitLikelihood">
<code class="sig-name descname">calculateInitLikelihood</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.calculateInitLikelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the value of the log likelihood function</p>
<p>The default values of the parameters are used.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the log likelihood.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.calculateLikelihood">
<code class="sig-name descname">calculateLikelihood</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">scaled</em>, <em class="sig-param">batch=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.calculateLikelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the value of the log likelihood function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) – vector of values for the parameters.</p></li>
<li><p><strong>scaled</strong> (<em>bool</em>) – if True, the value is diviced by the number of
observations used to calculate it. In this
case, the values with different sample sizes
are comparable. Default: True</p></li>
<li><p><strong>batch</strong> (<em>float</em>) – if not None, calculates the likelihood on a
random sample of the data. The value of the
parameter must be strictly between 0 and 1, and
represents the share of the data that will be
used. Default: None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the calculated value of the log likelihood</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the length of the list x is incorrect.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.calculateLikelihoodAndDerivatives">
<code class="sig-name descname">calculateLikelihoodAndDerivatives</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">scaled</em>, <em class="sig-param">hessian=False</em>, <em class="sig-param">bhhh=False</em>, <em class="sig-param">batch=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.calculateLikelihoodAndDerivatives" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the value of the log likelihood function and its derivatives.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) – vector of values for the parameters.</p></li>
<li><p><strong>hessian</strong> (<em>bool</em>) – if True, the hessian is calculated. Default: False.</p></li>
<li><p><strong>bhhh</strong> (<em>bool</em>) – if True, the BHHH matrix is calculated. Default: False.</p></li>
<li><p><strong>batch</strong> (<em>float</em>) – if not None, calculates the likelihood on a
random sample of the data. The value of the
parameter must be strictly between 0 and 1, and
represents the share of the data that will be
used. Default: None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>f, g, h, bh where</p>
<ul class="simple">
<li><p>f is the value of the function (float)</p></li>
<li><p>g is the gradient (numpy.array)</p></li>
<li><p>h is the hessian (numpy.array)</p></li>
<li><p>bh is the BHHH matrix (numpy.array)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple  float, numpy.array, numpy.array, numpy.array</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the length of the list x is incorrect</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.cfsqp">
<code class="sig-name descname">cfsqp</code><span class="sig-paren">(</span><em class="sig-param">betas</em>, <em class="sig-param">fixedBetas</em>, <em class="sig-param">betaIds</em>, <em class="sig-param">bounds</em>, <em class="sig-param">parameters</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.cfsqp" title="Permalink to this definition">¶</a></dt>
<dd><p>Invokes the CFSQP algorithm for estimation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>betas</strong> (<em>list of float</em>) – initial values of the parameters to be estimated.</p></li>
<li><p><strong>fixedBetas</strong> (<em>list of float</em>) – values of the parameters that are not estimated.</p></li>
<li><p><strong>betaIds</strong> (<em>list of int</em>) – list of IDs of the beta to be estimated.</p></li>
<li><p><strong>bounds</strong> (<em>list of tuple</em>) – lower and upper bounds on each parameter.</p></li>
<li><p><strong>parameters</strong> (<em>dict</em>) – <p>user defined parameters for CFSQP</p>
<ul>
<li><p>mode=CBA: specifies job options as described below</p>
<blockquote>
<div><ul class="simple">
<li><p>A = 0: ordinary minimax problems</p></li>
<li><p>A = 1: ordinary minimax problems with each individual function replaced by its absolute value, ie, an L_infty problem</p></li>
<li><p>B = 0: monotone decrease of objective function after each iteration</p></li>
<li><p>B = 1: monotone decrease of objective function after at most four iterations</p></li>
<li><p>C = 1: default operation.</p></li>
<li><p>C= 2: requires that constraints always be evaluated before objectives during the line search.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>iprint: print level indicator with the following options</p>
<blockquote>
<div><ul class="simple">
<li><p>iprint=0: no normal output, only error information (this option is imposed during phase 1)</p></li>
<li><p>iprint=1: a final printout at a local solution</p></li>
<li><p>iprint=2: a brief printout at the end of each iteration</p></li>
<li><p>iprint=3: detailed infomation is printed out at the end of each iteration (for debugging purposes)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>miter: maximum number of iterations allowed by the user to solve              the problem</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.changeInitValues">
<code class="sig-name descname">changeInitValues</code><span class="sig-paren">(</span><em class="sig-param">betas</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.changeInitValues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.checkDerivatives">
<code class="sig-name descname">checkDerivatives</code><span class="sig-paren">(</span><em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.checkDerivatives" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies the implementation of the derivatives.</p>
<p>It compares the analytical version with the finite differences approximation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>verbose</strong> (<em>bool</em>) – if True, the comparisons are reported. Default: False.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>f, g, h, gdiff, hdiff where</p>
<ul class="simple">
<li><p>f is the value of the function,</p></li>
<li><p>g is the analytical gradient,</p></li>
<li><p>h is the analytical hessian,</p></li>
<li><p>gdiff is the difference between the analytical and the
finite differences gradient,</p></li>
<li><p>hdiff is the difference between the analytical and the
finite differences hessian,</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.confidenceIntervals">
<code class="sig-name descname">confidenceIntervals</code><span class="sig-paren">(</span><em class="sig-param">betaValues</em>, <em class="sig-param">intervalSize=0.9</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.confidenceIntervals" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate confidence intervals on the simulated quantities</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>betaValues</strong> (<em>list</em><em>(</em><em>dict</em><em>(</em><em>float</em><em>)</em><em>)</em>) – array of parameters values to be used in
the calculations. Typically, it is a sample drawn from
a distribution.</p></li>
<li><p><strong>intervalSize</strong> (<em>float</em>) – size of the reported confidence interval,
in percentage. If it is denoted by s, the interval
is calculated for the quantiles (1-s)/2 and
(1+s)/2. The default (0.9) corresponds to
quantiles for the confidence interval [0.05,0.95].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>two pandas data frames ‘left’ and ‘right’ with the
same dimensions. Each row corresponds to a row in the
database, and each column to a formula. ‘left’ contains the
left value of the confidence interval, and ‘right’ the right
value</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read the estimation results from a file</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">bioResults</span><span class="p">(</span><span class="n">pickleFile</span><span class="o">=</span><span class="s1">&#39;myModel.pickle&#39;</span><span class="p">)</span>
<span class="c1"># Retrieve the names of the betas parameters that have been estimated</span>
<span class="n">betas</span> <span class="o">=</span> <span class="n">biogeme</span><span class="o">.</span><span class="n">freeBetaNames</span>
<span class="c1"># Draw 100 realization of the distribution of the estimators</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">getBetasForSensitivityAnalysis</span><span class="p">(</span><span class="n">betas</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="c1"># Simulate the formulas using the nominal values</span>
<span class="n">simulatedValues</span> <span class="o">=</span> <span class="n">biogeme</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">betaValues</span><span class="p">)</span>
<span class="c1"># Calculate the confidence intervals for each formula</span>
<span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">biogeme</span><span class="o">.</span><span class="n">confidenceIntervals</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
</pre></div>
</div>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple of two Pandas dataframes.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.createLogFile">
<code class="sig-name descname">createLogFile</code><span class="sig-paren">(</span><em class="sig-param">level=3</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.createLogFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a log file with the messages produced by Biogeme.</p>
<p>The name of the file is the name of the model with an extension .log</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> (<em>int</em>) – <p>types of messages to be captured</p>
<ul class="simple">
<li><p>0: no output</p></li>
<li><p>1: warnings</p></li>
<li><p>2: only general information</p></li>
<li><p>3: more verbose</p></li>
<li><p>4: debug messages</p></li>
</ul>
<p>Default: 3.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.estimate">
<code class="sig-name descname">estimate</code><span class="sig-paren">(</span><em class="sig-param">bootstrap=0</em>, <em class="sig-param">algorithm=&lt;function scipy&gt;</em>, <em class="sig-param">algoParameters=None</em>, <em class="sig-param">cfsqpDefaultBounds=1000.0</em>, <em class="sig-param">saveIterations=False</em>, <em class="sig-param">fileIterations='__savedIterations.txt'</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.estimate" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the parameters of the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bootstrap</strong> (<em>int</em>) – number of bootstrap resampling used to
calculate the variance-covariance matrix using
bootstrapping. If the number is 0, bootstrapping is not
applied. Default: 0.</p></li>
<li><p><strong>algorithm</strong> (<em>function</em>) – optimization algorithm to use for the
maximum likelihood estimation. If None, cfsqp is
used. Default: the optimization algorithm available
with scipy.</p></li>
<li><p><strong>algoParameters</strong> (<em>dict</em>) – parameters to transfer to the optimization algorithm</p></li>
<li><p><strong>cfsqpDefaultBounds</strong> (<em>float</em>) – if the user does not provide bounds
on the parameters, CFSQP assumes that the bounds are
[-cfsqpDefaultBounds,cfsqpDefaultBounds]</p></li>
<li><p><strong>saveIterations</strong> (<em>bool</em>) – if True, the values of the parameters
corresponding to the largest value of
the likelihood function are saved in a
pickle file at each iteration of the
algorithm. Default: False.</p></li>
<li><p><strong>fileIterations</strong> (<em>str</em>) – name of the file where to save the
values of the parameters. Default:
‘__savedIterations.txt’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>object containing the estimation results.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>biogeme.bioResults</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create an instance of biogeme</span>
<span class="n">biogeme</span>  <span class="o">=</span> <span class="n">bio</span><span class="o">.</span><span class="n">BIOGEME</span><span class="p">(</span><span class="n">database</span><span class="p">,</span> <span class="n">logprob</span><span class="p">)</span>
<span class="c1"># Gives a name to the model</span>
<span class="n">biogeme</span><span class="o">.</span><span class="n">modelName</span> <span class="o">=</span> <span class="s2">&quot;mymodel&quot;</span>
<span class="c1"># Estimate the parameters</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">biogeme</span><span class="o">.</span><span class="n">estimate</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogemeError</strong></a> – if no expression has been provided for the likelihood</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.getBoundsOnBeta">
<code class="sig-name descname">getBoundsOnBeta</code><span class="sig-paren">(</span><em class="sig-param">betaName</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.getBoundsOnBeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the bounds on the parameter as defined by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>betaName</strong> (<em>string</em>) – name of the parameter</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>lower bound, upper bound</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogemeError</strong></a> – if the name of the parameter is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.likelihoodFiniteDifferenceHessian">
<code class="sig-name descname">likelihoodFiniteDifferenceHessian</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.likelihoodFiniteDifferenceHessian" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the hessian of the log likelihood function using finite differences.</p>
<p>May be useful when the analytical hessian has numerical issues.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) – vector of values for the parameters.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>finite differences approximation of the hessian.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the length of the list x is incorrect</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.loadSavedIteration">
<code class="sig-name descname">loadSavedIteration</code><span class="sig-paren">(</span><em class="sig-param">filename='__savedIterations.txt'</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.loadSavedIteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the values of the parameters from a text file where each line
has the form name_of_beta = value_of_beta, and use these values in all
formulas.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">param filename</dt>
<dd class="field-odd"><p>name of the text file to read. Default: ‘__savedIterations.txt’</p>
</dd>
<dt class="field-even">type filename</dt>
<dd class="field-even"><p>str.</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.optimize">
<code class="sig-name descname">optimize</code><span class="sig-paren">(</span><em class="sig-param">startingValues</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the optimization algorithm.</p>
<p>The function self.algorithm is called. If None, CFSQP is invoked.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>startingValues</strong> (<em>list of floats</em>) – initial values of the parameters.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>x, nit, nfev, message, where</p>
<ul class="simple">
<li><p>x is the solution found,</p></li>
<li><p>nit is the number of iterations performed,</p></li>
<li><p>nfev is the number of time that the objective function has been evaluated, and</p></li>
<li><p>message is the diagnostic provided by the algorithm.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.BIOGEME.simulate">
<code class="sig-name descname">simulate</code><span class="sig-paren">(</span><em class="sig-param">theBetaValues=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.BIOGEME.simulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the formulas to each row of the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>theBetaValues</strong> (<em>dict</em><em>(</em><em>str</em><em>, </em><em>float</em><em>) or </em><em>list</em><em>(</em><em>float</em><em>)</em>) – values of the parameters to be used in
the calculations. If None, the default values are
used. Default: None.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pandas data frame with the simulated value. Each
row corresponds to a row in the database, and each
column to a formula.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Pandas data frame</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read the estimation results from a file</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">bioResults</span><span class="p">(</span><span class="n">pickleFile</span><span class="o">=</span><span class="s1">&#39;myModel.pickle&#39;</span><span class="p">)</span>
<span class="c1"># Simulate the formulas using the nominal values</span>
<span class="n">simulatedValues</span> <span class="o">=</span> <span class="n">biogeme</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">betaValues</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogemeError</strong></a> – if the number of parameters is incorrect</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.biogeme.negativeLikelihood">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.biogeme.</code><code class="sig-name descname">negativeLikelihood</code><span class="sig-paren">(</span><em class="sig-param">like</em>, <em class="sig-param">likeDeriv</em>, <em class="sig-param">scaled</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.negativeLikelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.optimization.functionToMinimize" title="biogeme.optimization.functionToMinimize"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.optimization.functionToMinimize</span></code></a></p>
<p>Provides the value of the function to be minimized, as well as its
derivatives. To be used by the opimization package.</p>
<dl class="method">
<dt id="biogeme.biogeme.negativeLikelihood.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">like</em>, <em class="sig-param">likeDeriv</em>, <em class="sig-param">scaled</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.negativeLikelihood.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.negativeLikelihood.f">
<code class="sig-name descname">f</code><span class="sig-paren">(</span><em class="sig-param">batch=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.negativeLikelihood.f" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the value of the function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>batch</strong> (<em>float</em>) – for data driven functions (such as a log
likelikood function), it is possible to
approximate the value of the function using a
sample of the data called a batch. This argument
is a value between 0 and 1 representing the
percentage of the data that should be used for
thre random batch. If None, the full data set is
used. Default: None pass</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.negativeLikelihood.f_g">
<code class="sig-name descname">f_g</code><span class="sig-paren">(</span><em class="sig-param">batch=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.negativeLikelihood.f_g" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the value of the function and the gradient</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>batch</strong> (<em>float</em>) – for data driven functions (such as a log
likelikood function), it is possible to
approximate the value of the function using a
sample of the data called a batch. This argument
is a value between 0 and 1 representing the
percentage of the data that should be used for
the random batch. If None, the full data set is
used. Default: None pass</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the function and the gradient</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple float, numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.negativeLikelihood.f_g_bhhh">
<code class="sig-name descname">f_g_bhhh</code><span class="sig-paren">(</span><em class="sig-param">batch=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.negativeLikelihood.f_g_bhhh" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the value of the function, the gradient and the BHHH matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>batch</strong> (<em>float</em>) – for data driven functions (such as a log
likelikood function), it is possible to
approximate the value of the function using a
sample of the data called a batch. This argument
is a value between 0 and 1 representing the
percentage of the data that should be used for
the random batch. If None, the full data set is
used. Default: None pass</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the function, the gradient and the BHHH</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple float, numpy.array, numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.negativeLikelihood.f_g_h">
<code class="sig-name descname">f_g_h</code><span class="sig-paren">(</span><em class="sig-param">batch=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.negativeLikelihood.f_g_h" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the value of the function, the gradient and the Hessian</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>batch</strong> (<em>float</em>) – for data driven functions (such as a log
likelikood function), it is possible to
approximate the value of the function using a
sample of the data called a batch. This argument
is a value between 0 and 1 representing the
percentage of the data that should be used for
the random batch. If None, the full data set is
used. Default: None pass</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the function, the gradient and the Hessian</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple float, numpy.array, numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.biogeme.negativeLikelihood.setVariables">
<code class="sig-name descname">setVariables</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.biogeme.negativeLikelihood.setVariables" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the values of the variables for which the function has to b calculated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>numpy.array</em>) – values</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-biogeme.database">
<span id="biogeme-database-module"></span><h2>biogeme.database module<a class="headerlink" href="#module-biogeme.database" title="Permalink to this headline">¶</a></h2>
<p>Implementation of the class Database, wrapping a pandas dataframe for specific services to Biogeme</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Tue Mar 26 16:42:54 2019</p>
</dd>
</dl>
<dl class="class">
<dt id="biogeme.database.Database">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.database.</code><code class="sig-name descname">Database</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">pandasDatabase</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class that contains and prepare the database.</p>
<dl class="method">
<dt id="biogeme.database.Database.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">pandasDatabase</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – name of the database.</p></li>
<li><p><strong>pandasDatabase</strong> (<em>pandas.DataFrame</em>) – data stored in a pandas data frame.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.addColumn">
<code class="sig-name descname">addColumn</code><span class="sig-paren">(</span><em class="sig-param">expression</em>, <em class="sig-param">column</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.addColumn" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new column in the database, calculated from an expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expression</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression to evaluate</p></li>
<li><p><strong>column</strong> (<em>string</em>) – name of the column to add</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the added column</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.Series</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the column name already exists.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.checkAvailabilityOfChosenAlt">
<code class="sig-name descname">checkAvailabilityOfChosenAlt</code><span class="sig-paren">(</span><em class="sig-param">avail</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.checkAvailabilityOfChosenAlt" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the chosen alternative is available for each entry in the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>avail</strong> (<em>list of biogeme.expressions.Expression</em>) – list of expressions to evaluate the availability conditions for each alternative.</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for the chosen alternative.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy series of bool, long as the number of entries in the database, containing True is the chosen alternative is available, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.count">
<code class="sig-name descname">count</code><span class="sig-paren">(</span><em class="sig-param">columnName</em>, <em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the number of observations that have a specific value in a
given column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>columnName</strong> (<em>string</em>) – name of the column.</p></li>
<li><p><strong>value</strong> (<em>float</em>) – value that is seeked.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of times that the value appears in the column.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.descriptionOfNativeDraws">
<code class="sig-name descname">descriptionOfNativeDraws</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.descriptionOfNativeDraws" title="Permalink to this definition">¶</a></dt>
<dd><p>Describe the draws available draws with Biogeme</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict, where the keys are the names of the draws, and the value their description</p>
</dd>
</dl>
<p>Example of output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;UNIFORM: Uniform U[0,1]&#39;</span><span class="p">,</span><span class="s1">&#39;UNIFORM_ANTI: Antithetic uniform U[0,1]&#39;</span><span class="p">],</span><span class="s1">&#39;NORMAL: Normal N(0,1) draws&#39;</span><span class="p">]</span>         
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.dumpOnFile">
<code class="sig-name descname">dumpOnFile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.dumpOnFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Dumps the database in a CSV formatted file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>name of the file</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.generateDraws">
<code class="sig-name descname">generateDraws</code><span class="sig-paren">(</span><em class="sig-param">types</em>, <em class="sig-param">names</em>, <em class="sig-param">numberOfDraws</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.generateDraws" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate draws for each variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>types</strong> (<em>dict</em>) – A dict indexed by the names of the variables,
describing the types of draws. Each of them can
be a native type or any type defined by the
function database.setRandomNumberGenerators</p></li>
<li><p><strong>names</strong> (<em>list of strings</em>) – the list of names of the variables that require draws to be generated.</p></li>
<li><p><strong>numberOfDraws</strong> (<em>int</em>) – number of draws to generate.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>a 3-dimensional table with draws. The 3 dimensions are</p>
<ol class="arabic simple">
<li><p>number of individuals</p></li>
<li><p>number of draws</p></li>
<li><p>number of variables</p></li>
</ol>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">types</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;randomDraws1&#39;</span><span class="p">:</span> <span class="s1">&#39;NORMAL_MLHS_ANTI&#39;</span><span class="p">,</span> <span class="s1">&#39;randomDraws2&#39;</span><span class="p">:</span> <span class="s1">&#39;UNIFORM_MLHS_ANTI&#39;</span><span class="p">,</span> <span class="s1">&#39;randomDraws3&#39;</span><span class="p">:</span> <span class="s1">&#39;UNIFORMSYM_MLHS_ANTI&#39;</span><span class="p">}</span>
<span class="n">theDrawsTable</span> <span class="o">=</span> <span class="n">myData</span><span class="o">.</span><span class="n">generateDraws</span><span class="p">(</span><span class="n">types</span><span class="p">,[</span><span class="s1">&#39;randomDraws1&#39;</span><span class="p">,</span><span class="s1">&#39;randomDraws2&#39;</span><span class="p">,</span><span class="s1">&#39;randomDraws3&#39;</span><span class="p">],</span><span class="mi">10</span><span class="p">)</span>        
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.getNumberOfObservations">
<code class="sig-name descname">getNumberOfObservations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.getNumberOfObservations" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Reports the number of observations in the database.</p>
</div></blockquote>
<p>Note that it returns the same value, irrespectively if the database contains panel data or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Number of observations.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
<p>See also:  getSampleSize()</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.getSampleSize">
<code class="sig-name descname">getSampleSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.getSampleSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Reports the size of the sample.</p>
<p>If the data is cross-sectional, it is the number of
observations in the database. If the data is panel, it is the
number of individuals.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Sample size.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
<p>See also: getNumberOfObservations()</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.isPanel">
<code class="sig-name descname">isPanel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.isPanel" title="Permalink to this definition">¶</a></dt>
<dd><p>Tells if the data is panel or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if the data is panel.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.panel">
<code class="sig-name descname">panel</code><span class="sig-paren">(</span><em class="sig-param">columnName</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.panel" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the data as panel data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>columnName</strong> (<em>string</em>) – name of the columns that identifies individuals.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.remove">
<code class="sig-name descname">remove</code><span class="sig-paren">(</span><em class="sig-param">expression</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes from the database all entries such that the value of the expression is not 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expression</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression to evaluate</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.sampleIndividualMapWithReplacement">
<code class="sig-name descname">sampleIndividualMapWithReplacement</code><span class="sig-paren">(</span><em class="sig-param">size=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.sampleIndividualMapWithReplacement" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a random sample of the individual map from a panel data database, with replacement.</p>
<p>Useful for bootstrapping.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>size</strong> (<em>int</em>) – size of the sample. If None, a sample of the same size as the database will be generated. Default: None.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>pandas dataframe with the sample.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.sampleWithReplacement">
<code class="sig-name descname">sampleWithReplacement</code><span class="sig-paren">(</span><em class="sig-param">size=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.sampleWithReplacement" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a random sample from the database, with replacement.</p>
<p>Useful for bootstrapping.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>size</strong> (<em>int</em>) – size of the sample. If None, a sample of the same size as the database will be generated. Default: None.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>pandas dataframe with the sample.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.sampleWithoutReplacement">
<code class="sig-name descname">sampleWithoutReplacement</code><span class="sig-paren">(</span><em class="sig-param">samplingRate</em>, <em class="sig-param">columnWithSamplingWeights=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.sampleWithoutReplacement" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace the data set by a sample for stochastic algorithms</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>samplingRate</strong> (<em>float</em>) – the proportion of data to include in the sample.</p></li>
<li><p><strong>columnWithSamplingWeights</strong> – name of the column with the sampling weights. If None, each row has eqaul probability.</p></li>
<li><p><strong>columnWithSamplingWeights</strong> – string</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.scaleColumn">
<code class="sig-name descname">scaleColumn</code><span class="sig-paren">(</span><em class="sig-param">column</em>, <em class="sig-param">scale</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.scaleColumn" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiply an entire column by a scale value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> (<em>string</em>) – name of the column</p></li>
<li><p><strong>scale</strong> (<em>float</em>) – value of the scale. All values of the column will
be multiplied by that scale.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.setRandomNumberGenerators">
<code class="sig-name descname">setRandomNumberGenerators</code><span class="sig-paren">(</span><em class="sig-param">rng</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.setRandomNumberGenerators" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines user-defined random numbers generators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rng</strong> (<em>dict</em>) – a dictionary of generators. The keys of the dictionary
characterize the name of the generators, and must be
different from the pre-defined generators in Biogeme:
NORMAL, UNIFORM and UNIFORMSYM. The elements of the
dictionary are functions that take two arguments: the
number of series to generate (typically, the size of the
database), and the number of draws per series.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">logNormalDraws</span><span class="p">(</span><span class="n">sampleSize</span><span class="p">,</span><span class="n">numberOfDraws</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">sampleSize</span><span class="p">,</span><span class="n">numberOfDraws</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">exponentialDraws</span><span class="p">(</span><span class="n">sampleSize</span><span class="p">,</span><span class="n">numberOfDraws</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">-</span><span class="mf">1.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">sampleSize</span><span class="p">,</span><span class="n">numberOfDraws</span><span class="p">))</span>

<span class="c1"># We associate these functions with a name</span>
<span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;LOGNORMAL&#39;</span><span class="p">:(</span><span class="n">logNormalDraws</span><span class="p">,</span><span class="s1">&#39;Draws from lognormal distribution&#39;</span><span class="p">),</span><span class="s1">&#39;EXP&#39;</span><span class="p">:(</span><span class="n">exponentialDraws</span><span class="p">,</span><span class="s1">&#39;Draws from exponential distributions&#39;</span><span class="p">)}</span>
<span class="n">myData</span><span class="o">.</span><span class="n">setRandomNumberGenerators</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.suggestScaling">
<code class="sig-name descname">suggestScaling</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.suggestScaling" title="Permalink to this definition">¶</a></dt>
<dd><p>Suggest a scaling of the variables in the database.</p>
<p>For each column, <span class="math notranslate nohighlight">\(\delta\)</span> is the difference between the
largest and the smallest value, or one if the difference is
smaller than one. The level of magnitude is evaluated as a
power of 10. The suggested scale is the inverse of this value.</p>
<div class="math notranslate nohighlight">
\[s = \frac{1}{10^{|\log_{10} \delta|}}\]</div>
<p>where <span class="math notranslate nohighlight">\(|x|\)</span> is the integer closest to <span class="math notranslate nohighlight">\(x\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A Pandas dataframe where each row contains the name
of the variable and the suggested scale s. Ideally,
the column should be multiplied by s.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.sumFromDatabase">
<code class="sig-name descname">sumFromDatabase</code><span class="sig-paren">(</span><em class="sig-param">expression</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.sumFromDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the value of an expression for each entry in the database, and returns the sum.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expression</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression to evaluate</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>sum of the expressions over the database.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.useFullSample">
<code class="sig-name descname">useFullSample</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.useFullSample" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-establish the full sample for calculation of the likelihood</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.database.Database.valuesFromDatabase">
<code class="sig-name descname">valuesFromDatabase</code><span class="sig-paren">(</span><em class="sig-param">expression</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.database.Database.valuesFromDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates an expression for each entry of the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expression</strong> (<em>biogeme.expressions.Expression.</em>) – expression to evaluate</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy series, long as the number of entries in the database, containing the calculated quantities.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.Series</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-biogeme.distributions">
<span id="biogeme-distributions-module"></span><h2>biogeme.distributions module<a class="headerlink" href="#module-biogeme.distributions" title="Permalink to this headline">¶</a></h2>
<p>Implementation of the pdf and CDF of common distributions</p>
<p>:author:Michel Bierlaire</p>
<dl class="field-list simple">
<dt class="field-odd">data</dt>
<dd class="field-odd"><p>Thu Apr 23 12:01:49 2015</p>
</dd>
</dl>
<dl class="function">
<dt id="biogeme.distributions.logisticcdf">
<code class="sig-prename descclassname">biogeme.distributions.</code><code class="sig-name descname">logisticcdf</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">mu=0.0</em>, <em class="sig-param">s=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.distributions.logisticcdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Logistic CDF</p>
<p>Cumulative distribution function of a logistic distribution</p>
<div class="math notranslate nohighlight">
\[f(x;\mu,\sigma) = \frac{1}{1+\exp\left(-\frac{x-\mu}{\sigma} \right)} \]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – location parameter <span class="math notranslate nohighlight">\(\mu\)</span> of the logistic distribution. Default: 0.</p></li>
<li><p><strong>x</strong> – scale parameter <span class="math notranslate nohighlight">\(\sigma\)</span> of the logistic distribution. Default: 1.</p></li>
</ul>
</dd>
<dt class="field-even">Note</dt>
<dd class="field-even"><p>It is assumed that <span class="math notranslate nohighlight">\(\sigma &gt; 0\)</span>, but it is not verified by the code.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the logistic CDF.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float or biogeme.expression</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.distributions.lognormalpdf">
<code class="sig-prename descclassname">biogeme.distributions.</code><code class="sig-name descname">lognormalpdf</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">mu</em>, <em class="sig-param">s</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.distributions.lognormalpdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Log normal pdf</p>
<p>Probability density function of a log normal distribution</p>
<div class="math notranslate nohighlight">
\[f(x;\mu,\sigma) =  \frac{1}{x\sigma \sqrt{2\pi}} \exp{-\frac{(\ln x-\mu)^2}{2\sigma^2}}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – location parameter <span class="math notranslate nohighlight">\(\mu\)</span> of the lognormal distribution. Default: 0.</p></li>
<li><p><strong>s</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – scale parameter <span class="math notranslate nohighlight">\(\sigma\)</span> of the lognormal distribution. Default: 1.</p></li>
</ul>
</dd>
<dt class="field-even">Note</dt>
<dd class="field-even"><p>It is assumed that <span class="math notranslate nohighlight">\(\sigma &gt; 0\)</span>, but it is not verified by the code.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the lognormal pdf.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float or biogeme.expression</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.distributions.normalpdf">
<code class="sig-prename descclassname">biogeme.distributions.</code><code class="sig-name descname">normalpdf</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">mu=0.0</em>, <em class="sig-param">s=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.distributions.normalpdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Normal pdf</p>
<p>Probability density function of a normal distribution</p>
<div class="math notranslate nohighlight">
\[f(x;\mu,\sigma) = \frac{1}{\sigma \sqrt{2\pi}} \exp{-\frac{(x-\mu)^2}{2\sigma^2}}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – location parameter <span class="math notranslate nohighlight">\(\mu\)</span> of the Normal distribution. Default: 0.</p></li>
<li><p><strong>s</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – scale parameter <span class="math notranslate nohighlight">\(\sigma\)</span> of the Normal distribution. Default: 1.</p></li>
</ul>
</dd>
<dt class="field-even">Note</dt>
<dd class="field-even"><p>It is assumed that <span class="math notranslate nohighlight">\(\sigma &gt; 0\)</span>, but it is not verified by the code.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the Normal pdf.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float or biogeme.expression</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.distributions.triangularpdf">
<code class="sig-prename descclassname">biogeme.distributions.</code><code class="sig-name descname">triangularpdf</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">a=-1.0</em>, <em class="sig-param">b=1.0</em>, <em class="sig-param">c=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.distributions.triangularpdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Triangular pdf</p>
<p>Probability density function of a triangular distribution</p>
<div class="math notranslate nohighlight">
\[\begin{split}f(x;a,b,c) = \left\{ \begin{array}{ll} 0 &amp; \text{if } x &lt; a \\\frac{2(x-a)}{(b-a)(c-a)} &amp; \text{if } a \leq x &lt; c \\\frac{2(b-x)}{(b-a)(b-c)} &amp; \text{if } c \leq x &lt; b \\0 &amp; \text{if } x \geq b.\end{array} \right.\end{split}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – argument of the pdf</p></li>
<li><p><strong>a</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – lower bound <span class="math notranslate nohighlight">\(a\)</span> of the distribution. Default: -1.</p></li>
<li><p><strong>b</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – upper bound <span class="math notranslate nohighlight">\(b\)</span> of the distribution. Default: 1.</p></li>
<li><p><strong>c</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – mode <span class="math notranslate nohighlight">\(c\)</span> of the distribution. Default: 0.</p></li>
</ul>
</dd>
<dt class="field-even">Note</dt>
<dd class="field-even"><p>It is assumed that <span class="math notranslate nohighlight">\(a &lt;  c &lt; b\)</span>, but it is not verified by the code.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the triangular pdf.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float or biogeme.expression</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.distributions.uniformpdf">
<code class="sig-prename descclassname">biogeme.distributions.</code><code class="sig-name descname">uniformpdf</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">a=-1</em>, <em class="sig-param">b=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.distributions.uniformpdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Uniform pdf</p>
<p>Probability density function of a uniform distribution.</p>
<div class="math notranslate nohighlight">
\[\begin{split}f(x;a,b) = \left\{ \begin{array}{ll} \frac{1}{b-a} &amp; \text{for } x \in [a,b] \\ 0 &amp; \text{otherwise}\end{array} \right.\end{split}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – argument of the pdf</p></li>
<li><p><strong>a</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – lower bound <span class="math notranslate nohighlight">\(a\)</span> of the distribution. Default: -1.</p></li>
<li><p><strong>b</strong> (<em>float</em><em> or </em><em>biogeme.expression</em>) – upper bound <span class="math notranslate nohighlight">\(b\)</span> of the distribution. Default: 1.</p></li>
</ul>
</dd>
<dt class="field-even">Note</dt>
<dd class="field-even"><p>It is assumed that <span class="math notranslate nohighlight">\(a &lt; b\)</span>, but it is not verified by the code.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the uniform pdf.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float or biogeme.expression</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-biogeme.draws">
<span id="biogeme-draws-module"></span><h2>biogeme.draws module<a class="headerlink" href="#module-biogeme.draws" title="Permalink to this headline">¶</a></h2>
<p>Generation of various types of draws.</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Tue Jun 18 19:05:13 2019</p>
</dd>
</dl>
<dl class="function">
<dt id="biogeme.draws.getAntithetic">
<code class="sig-prename descclassname">biogeme.draws.</code><code class="sig-name descname">getAntithetic</code><span class="sig-paren">(</span><em class="sig-param">unif</em>, <em class="sig-param">sampleSize</em>, <em class="sig-param">numberOfDraws</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.draws.getAntithetic" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns antithetic uniform draws</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unif</strong> (<em>function</em>) – function taking two arguments (sampleSize,numberOfDraws) and returning U[0,1] draws</p></li>
<li><p><strong>sampleSize</strong> (<em>int</em>) – number of observations for which draws must be
generated. If None, a one dimensional array
will be generated. If it has a values k, then k
series of draws will be generated</p></li>
<li><p><strong>numberOfDraws</strong> (<em>int</em>) – number of draws to generate.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy array with the antithetic draws</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">draws</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">getAntithetic</span><span class="p">(</span><span class="n">dr</span><span class="o">.</span><span class="n">getUniform</span><span class="p">,</span><span class="n">sampleSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">numberOfDraws</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="n">array</span><span class="p">([[</span><span class="mf">0.48592363</span><span class="p">,</span> <span class="mf">0.13648133</span><span class="p">,</span> <span class="mf">0.35925946</span><span class="p">,</span> <span class="mf">0.32431338</span><span class="p">,</span> <span class="mf">0.32997936</span><span class="p">,</span>
        <span class="mf">0.51407637</span><span class="p">,</span> <span class="mf">0.86351867</span><span class="p">,</span> <span class="mf">0.64074054</span><span class="p">,</span> <span class="mf">0.67568662</span><span class="p">,</span> <span class="mf">0.67002064</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">0.89261997</span><span class="p">,</span> <span class="mf">0.0331808</span> <span class="p">,</span> <span class="mf">0.30767182</span><span class="p">,</span> <span class="mf">0.93433648</span><span class="p">,</span> <span class="mf">0.17196124</span><span class="p">,</span>
        <span class="mf">0.10738003</span><span class="p">,</span> <span class="mf">0.9668192</span> <span class="p">,</span> <span class="mf">0.69232818</span><span class="p">,</span> <span class="mf">0.06566352</span><span class="p">,</span> <span class="mf">0.82803876</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">0.81095587</span><span class="p">,</span> <span class="mf">0.96171364</span><span class="p">,</span> <span class="mf">0.40984817</span><span class="p">,</span> <span class="mf">0.72177258</span><span class="p">,</span> <span class="mf">0.16481096</span><span class="p">,</span>
        <span class="mf">0.18904413</span><span class="p">,</span> <span class="mf">0.03828636</span><span class="p">,</span> <span class="mf">0.59015183</span><span class="p">,</span> <span class="mf">0.27822742</span><span class="p">,</span> <span class="mf">0.83518904</span><span class="p">]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="biogeme.draws.getHaltonDraws">
<code class="sig-prename descclassname">biogeme.draws.</code><code class="sig-name descname">getHaltonDraws</code><span class="sig-paren">(</span><em class="sig-param">sampleSize</em>, <em class="sig-param">numberOfDraws</em>, <em class="sig-param">symmetric=False</em>, <em class="sig-param">base=2</em>, <em class="sig-param">skip=0</em>, <em class="sig-param">shuffled=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.draws.getHaltonDraws" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Halton draws</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampleSize</strong> (<em>int</em>) – number of observations for which draws must be
generated. If None, a one dimensional array
will be generated. If it has a values k, then k
series of draws will be generated</p></li>
<li><p><strong>numberOfDraws</strong> (<em>int</em>) – number of draws to generate.</p></li>
<li><p><strong>symmetric</strong> (<em>bool</em>) – if True, draws from [-1:1] are generated. If False, draws from [0:1] are generated.  Default: False</p></li>
<li><p><strong>base</strong> (<em>int</em>) – generate Halton draws for a given basis. Ideally, it should be a prime number. Default: 2.</p></li>
<li><p><strong>skip</strong> (<em>int</em>) – the number of  elements of the sequence to be discarded.</p></li>
<li><p><strong>shuffled</strong> (<em>bool</em>) – if True, each series is shuffled</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy array with the draws</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">halton</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">getHaltonDraws</span><span class="p">(</span><span class="n">sampleSize</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">numberOfDraws</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">base</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">array</span><span class="p">([[</span><span class="mf">0.33333333</span><span class="p">,</span> <span class="mf">0.66666667</span><span class="p">,</span> <span class="mf">0.11111111</span><span class="p">,</span> <span class="mf">0.44444444</span><span class="p">,</span> <span class="mf">0.77777778</span><span class="p">,</span>
        <span class="mf">0.22222222</span><span class="p">,</span> <span class="mf">0.55555556</span><span class="p">,</span> <span class="mf">0.88888889</span><span class="p">,</span> <span class="mf">0.03703704</span><span class="p">,</span> <span class="mf">0.37037037</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">0.7037037</span> <span class="p">,</span> <span class="mf">0.14814815</span><span class="p">,</span> <span class="mf">0.48148148</span><span class="p">,</span> <span class="mf">0.81481481</span><span class="p">,</span> <span class="mf">0.25925926</span><span class="p">,</span>
        <span class="mf">0.59259259</span><span class="p">,</span> <span class="mf">0.92592593</span><span class="p">,</span> <span class="mf">0.07407407</span><span class="p">,</span> <span class="mf">0.40740741</span><span class="p">,</span> <span class="mf">0.74074074</span><span class="p">]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="biogeme.draws.getLatinHypercubeDraws">
<code class="sig-prename descclassname">biogeme.draws.</code><code class="sig-name descname">getLatinHypercubeDraws</code><span class="sig-paren">(</span><em class="sig-param">sampleSize</em>, <em class="sig-param">numberOfDraws</em>, <em class="sig-param">symmetric=False</em>, <em class="sig-param">uniformNumbers=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.draws.getLatinHypercubeDraws" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Implementation of the Modified Latin Hypercube Sampling proposed</dt><dd><p>by Hess et al, 2006.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampleSize</strong> (<em>int</em>) – number of observations for which draws must be
generated. If None, a one dimensional array
will be generated. If it has a values k, then k
series of draws will be generated</p></li>
<li><p><strong>numberOfDraws</strong> (<em>int</em>) – number of draws to generate.</p></li>
<li><p><strong>symmetric</strong> (<em>bool</em>) – if True, draws from [-1:1] are generated. If False, draws from [0:1] are generated.  Default: False</p></li>
<li><p><strong>uniformNumbers</strong> (<em>numpy.array</em>) – numpy with uniformly distributed numbers. If None, the numpy uniform number generator is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy array with the draws</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">latinHypercube</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">getLatinHypercubeDraws</span><span class="p">(</span><span class="n">sampleSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">numberOfDraws</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">array</span><span class="p">([[</span><span class="mf">0.43362897</span><span class="p">,</span> <span class="mf">0.5275741</span> <span class="p">,</span> <span class="mf">0.09215663</span><span class="p">,</span> <span class="mf">0.94056236</span><span class="p">,</span> <span class="mf">0.34376868</span><span class="p">,</span>
        <span class="mf">0.87195551</span><span class="p">,</span> <span class="mf">0.41495219</span><span class="p">,</span> <span class="mf">0.71736691</span><span class="p">,</span> <span class="mf">0.23198736</span><span class="p">,</span> <span class="mf">0.145561</span>  <span class="p">],</span>
       <span class="p">[</span><span class="mf">0.30520544</span><span class="p">,</span> <span class="mf">0.78082964</span><span class="p">,</span> <span class="mf">0.83591146</span><span class="p">,</span> <span class="mf">0.2733167</span> <span class="p">,</span> <span class="mf">0.53890906</span><span class="p">,</span>
        <span class="mf">0.61607469</span><span class="p">,</span> <span class="mf">0.00699715</span><span class="p">,</span> <span class="mf">0.17179441</span><span class="p">,</span> <span class="mf">0.7557228</span> <span class="p">,</span> <span class="mf">0.39733102</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">0.49676864</span><span class="p">,</span> <span class="mf">0.67073483</span><span class="p">,</span> <span class="mf">0.9788854</span> <span class="p">,</span> <span class="mf">0.5726069</span> <span class="p">,</span> <span class="mf">0.11894558</span><span class="p">,</span>
        <span class="mf">0.05515471</span><span class="p">,</span> <span class="mf">0.2640275</span> <span class="p">,</span> <span class="mf">0.82093696</span><span class="p">,</span> <span class="mf">0.92034628</span><span class="p">,</span> <span class="mf">0.64866597</span><span class="p">]])</span>    
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="biogeme.draws.getNormalWichuraDraws">
<code class="sig-prename descclassname">biogeme.draws.</code><code class="sig-name descname">getNormalWichuraDraws</code><span class="sig-paren">(</span><em class="sig-param">sampleSize</em>, <em class="sig-param">numberOfDraws</em>, <em class="sig-param">uniformNumbers=None</em>, <em class="sig-param">antithetic=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.draws.getNormalWichuraDraws" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate pseudo-random numbers from a normal distribution N(0,1)</p>
<p>It uses the Algorithm AS241 Appl. Statist. (1988) Vol. 37, No. 3,
which produces the normal deviate z corresponding to a given lower
tail area of p; z is accurate to about 1 part in <span class="math notranslate nohighlight">\(10^{16}\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampleSize</strong> (<em>int</em>) – number of observations for which draws must be
generated. If None, a one dimensional array
will be generated. If it has a values k, then k
series of draws will be generated</p></li>
<li><p><strong>numberOfDraws</strong> (<em>int</em>) – number of draws to generate.</p></li>
<li><p><strong>uniformNumbers</strong> (<em>numpy.array</em>) – numpy with uniformly distributed numbers. If None, the numpy uniform number generator is used.</p></li>
<li><p><strong>antithetic</strong> (<em>bool</em>) – if True, only half of the draws are actually generated, and the series are completed with their antithetic version.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy array with the draws</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">draws</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">getNormalWichuraDraws</span><span class="p">(</span><span class="n">sampleSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">numberOfDraws</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">array</span><span class="p">([[</span> <span class="mf">0.52418458</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.04344204</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.11642482</span><span class="p">,</span>  <span class="mf">0.48257162</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.67188279</span><span class="p">,</span>
        <span class="o">-</span><span class="mf">1.89993283</span><span class="p">,</span>  <span class="mf">0.28251041</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.38424425</span><span class="p">,</span>  <span class="mf">1.53182226</span><span class="p">,</span>  <span class="mf">0.30651874</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">0.7937038</span> <span class="p">,</span> <span class="o">-</span><span class="mf">0.07884121</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.91005616</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.98855175</span><span class="p">,</span>  <span class="mf">1.09405753</span><span class="p">,</span>
        <span class="o">-</span><span class="mf">0.5997651</span> <span class="p">,</span> <span class="o">-</span><span class="mf">1.70785113</span><span class="p">,</span>  <span class="mf">1.57571384</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.33208723</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.03510102</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">0.13853654</span><span class="p">,</span>  <span class="mf">0.92595498</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.80136586</span><span class="p">,</span>  <span class="mf">1.68454196</span><span class="p">,</span>  <span class="mf">0.9955927</span> <span class="p">,</span>
        <span class="o">-</span><span class="mf">0.28615154</span><span class="p">,</span>  <span class="mf">2.10635541</span><span class="p">,</span>  <span class="mf">0.0436191</span> <span class="p">,</span> <span class="o">-</span><span class="mf">0.25417774</span><span class="p">,</span>  <span class="mf">0.01026933</span><span class="p">]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="biogeme.draws.getUniform">
<code class="sig-prename descclassname">biogeme.draws.</code><code class="sig-name descname">getUniform</code><span class="sig-paren">(</span><em class="sig-param">sampleSize</em>, <em class="sig-param">numberOfDraws</em>, <em class="sig-param">symmetric=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.draws.getUniform" title="Permalink to this definition">¶</a></dt>
<dd><p>Uniform [0,1] or [-1,1] numbers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampleSize</strong> (<em>int</em>) – number of observations for which draws must be
generated. If None, a one dimensional array
will be generated. If it has a values k, then k
series of draws will be generated</p></li>
<li><p><strong>numberOfDraws</strong> (<em>int</em>) – number of draws to generate.</p></li>
<li><p><strong>symmetric</strong> (<em>bool</em>) – if True, draws from [-1:1] are generated. If False, draws from [0:1] are generated.  Default: False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy array with the draws</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">draws</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">getUniform</span><span class="p">(</span><span class="n">sampleSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">numberOfDraws</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">symmetric</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">array</span><span class="p">([[</span><span class="mf">0.13053817</span><span class="p">,</span> <span class="mf">0.63892308</span><span class="p">,</span> <span class="mf">0.55031567</span><span class="p">,</span> <span class="mf">0.26347854</span><span class="p">,</span> <span class="mf">0.16730932</span><span class="p">,</span>
        <span class="mf">0.77745367</span><span class="p">,</span> <span class="mf">0.48283887</span><span class="p">,</span> <span class="mf">0.84247501</span><span class="p">,</span> <span class="mf">0.20550219</span><span class="p">,</span> <span class="mf">0.02373537</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">0.68935846</span><span class="p">,</span> <span class="mf">0.03363595</span><span class="p">,</span> <span class="mf">0.36006669</span><span class="p">,</span> <span class="mf">0.26709364</span><span class="p">,</span> <span class="mf">0.54907706</span><span class="p">,</span>
        <span class="mf">0.22492104</span><span class="p">,</span> <span class="mf">0.2494399</span> <span class="p">,</span> <span class="mf">0.17323209</span><span class="p">,</span> <span class="mf">0.52370401</span><span class="p">,</span> <span class="mf">0.54091257</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">0.40310204</span><span class="p">,</span> <span class="mf">0.89916711</span><span class="p">,</span> <span class="mf">0.86065005</span><span class="p">,</span> <span class="mf">0.94277699</span><span class="p">,</span> <span class="mf">0.09077065</span><span class="p">,</span>
        <span class="mf">0.40107731</span><span class="p">,</span> <span class="mf">0.22554722</span><span class="p">,</span> <span class="mf">0.47693135</span><span class="p">,</span> <span class="mf">0.14058265</span><span class="p">,</span> <span class="mf">0.17397031</span><span class="p">]])</span>

<span class="n">draws</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">getUniform</span><span class="p">(</span><span class="n">sampleSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">numberOfDraws</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">array</span><span class="p">([[</span> <span class="mf">0.74403237</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.27995692</span><span class="p">,</span>  <span class="mf">0.33997421</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.89405035</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.129761</span>  <span class="p">,</span>
         <span class="mf">0.86593325</span><span class="p">,</span>  <span class="mf">0.30657422</span><span class="p">,</span>  <span class="mf">0.82435619</span><span class="p">,</span>  <span class="mf">0.498482</span>  <span class="p">,</span>  <span class="mf">0.24561616</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">0.48239607</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.29257815</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.98342034</span><span class="p">,</span>  <span class="mf">0.68392813</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.25379429</span><span class="p">,</span>
         <span class="mf">0.49359859</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.26459883</span><span class="p">,</span>  <span class="mf">0.14569724</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.68860467</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.40903446</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.93251627</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.85166912</span><span class="p">,</span>  <span class="mf">0.58096917</span><span class="p">,</span>  <span class="mf">0.39289882</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.65088635</span><span class="p">,</span>
         <span class="mf">0.40114744</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.61327161</span><span class="p">,</span>  <span class="mf">0.08900539</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.20985417</span><span class="p">,</span>  <span class="mf">0.67542226</span><span class="p">]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-biogeme.exceptions">
<span id="biogeme-exceptions-module"></span><h2>biogeme.exceptions module<a class="headerlink" href="#module-biogeme.exceptions" title="Permalink to this headline">¶</a></h2>
<p>Defines a generic exception for Biogeme</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Tue Mar 26 16:47:11 2019</p>
</dd>
</dl>
<dl class="exception">
<dt id="biogeme.exceptions.biogemeError">
<em class="property">exception </em><code class="sig-prename descclassname">biogeme.exceptions.</code><code class="sig-name descname">biogemeError</code><a class="headerlink" href="#biogeme.exceptions.biogemeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Defines a generic exception for Biogeme.</p>
</dd></dl>

</div>
<div class="section" id="module-biogeme.expressions">
<span id="biogeme-expressions-module"></span><h2>biogeme.expressions module<a class="headerlink" href="#module-biogeme.expressions" title="Permalink to this headline">¶</a></h2>
<p>Defines the various arithmetic expressions accepted by Biogeme.</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Tue Mar 26 16:47:49 2019</p>
</dd>
</dl>
<dl class="class">
<dt id="biogeme.expressions.And">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">And</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.And" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Logical and</p>
<dl class="method">
<dt id="biogeme.expressions.And.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.And.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.And.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.And.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Beta">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Beta</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">value</em>, <em class="sig-param">lowerbound</em>, <em class="sig-param">upperbound</em>, <em class="sig-param">status</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Beta" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Elementary" title="biogeme.expressions.Elementary"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Elementary</span></code></a></p>
<p>Unknown parameters to be estimated from data.</p>
<dl class="method">
<dt id="biogeme.expressions.Beta.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">value</em>, <em class="sig-param">lowerbound</em>, <em class="sig-param">upperbound</em>, <em class="sig-param">status</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Beta.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – name of the parameter.</p></li>
<li><p><strong>value</strong> (<em>float</em>) – default value.</p></li>
<li><p><strong>lowerbound</strong> (<em>float</em>) – if different from None, imposes a lower bound on the value of the parameter during the optimization.</p></li>
<li><p><strong>upperbound</strong> (<em>float</em>) – if different from None, imposes an upper bound on the value of the parameter during the optimization.</p></li>
<li><p><strong>status</strong> (<em>int</em>) – if different from 0, the parameter is fixed to its default value, and not modified by the optimization algorithm.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Beta.changeInitValues">
<code class="sig-name descname">changeInitValues</code><span class="sig-paren">(</span><em class="sig-param">betas</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Beta.changeInitValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Modifies the initial values of the Beta parameters.</p>
<p>The fact that the parameters are fixed or free is irrelevant here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>betas</strong> (<em>dict</em><em>(</em><em>string:float</em><em>)</em>) – dictionary where the keys are the names of the
parameters, and the values are the new value for
the parameters.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Beta.dictOfBetas">
<code class="sig-name descname">dictOfBetas</code><span class="sig-paren">(</span><em class="sig-param">free=True</em>, <em class="sig-param">fixed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Beta.dictOfBetas" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the set of parameters from the expression. Overload the generic function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>free</strong> (<em>bool</em>) – if True, the free parameters are included. Default: True.</p></li>
<li><p><strong>fixed</strong> (<em>bool</em>) – if True, the fixed parameters are included. Default: False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dict with the beta parameters appearing in the expression, the keys being the names of the parameters.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict(string:biogeme.expressions.Expression)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Beta.getSignature">
<code class="sig-name descname">getSignature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Beta.getSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>The signature of a string characterizing an expression.</p>
<p>This is designed to be communicated to C++, so that the
expression can be reconstructed in this environment.</p>
<p>The list contains the following elements:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>the name of the expression between &lt; &gt;</p></li>
<li><p>the id of the expression between { }</p></li>
<li><p>the name of the parameter,</p></li>
<li><p>the status between [ ]</p></li>
<li><p>the unique ID,  preceeded by a comma</p></li>
<li><p>the beta ID,  preceeded by a comma</p></li>
</ol>
</div></blockquote>
<p>Consider the following expression:</p>
<div class="math notranslate nohighlight">
\[2 \beta_1  V_1 - \frac{\exp(-\beta_2 V_2) }{ \beta_3  (\beta_2 \geq \beta_1)}.\]</div>
<p>It is defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">Variable1</span> <span class="o">-</span> <span class="n">expressions</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta2</span><span class="o">*</span><span class="n">Variable2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta3</span> <span class="o">*</span> <span class="p">(</span><span class="n">beta2</span> <span class="o">&gt;=</span> <span class="n">beta1</span><span class="p">))</span>  
</pre></div>
</div>
<p>And its signature is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;Numeric&gt;</span><span class="si">{4780527008}</span><span class="s1">,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780526952}</span><span class="s1">(2),4780527008,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837152}</span><span class="s1">&quot;Variable1&quot;,5,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527064}</span><span class="s1">(2),4780526952,4511837152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;UnaryMinus&gt;</span><span class="si">{4780527120}</span><span class="s1">(1),4780277656&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837712}</span><span class="s1">&quot;Variable2&quot;,6,3&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527176}</span><span class="s1">(2),4780527120,4511837712&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;exp&gt;</span><span class="si">{4780527232}</span><span class="s1">(1),4780527176&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277264}</span><span class="s1">&quot;beta3&quot;[1],2,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;GreaterOrEqual&gt;</span><span class="si">{4780527288}</span><span class="s1">(2),4780277656,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527344}</span><span class="s1">(2),4780277264,4780527288&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Divide&gt;</span><span class="si">{4780527400}</span><span class="s1">(2),4780527232,4780527344&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Minus&gt;</span><span class="si">{4780527456}</span><span class="s1">(2),4780527064,4780527400&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of the signatures of an expression and its children.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(string)</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if no id has been defined for elementary expression</p></li>
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if no id has been defined for parameter</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Beta.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Beta.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Beta.setOfBetas">
<code class="sig-name descname">setOfBetas</code><span class="sig-paren">(</span><em class="sig-param">free=True</em>, <em class="sig-param">fixed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Beta.setOfBetas" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the set of parameters from the expression. Overload the generic function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>free</strong> (<em>bool</em>) – if True, the free parameters are included. Default: True.</p></li>
<li><p><strong>fixed</strong> (<em>bool</em>) – if True, the fixed parameters are included. Default: False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>returns a set with the beta parameters appearing in the expression.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>set(<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Beta.setSpecificIndices">
<code class="sig-name descname">setSpecificIndices</code><span class="sig-paren">(</span><em class="sig-param">indicesOfFreeBetas</em>, <em class="sig-param">indicesOfFixedBetas</em>, <em class="sig-param">indicesOfRandomVariables</em>, <em class="sig-param">indicesOfDraws</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Beta.setSpecificIndices" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide an index to all elementary expressions, specific to their type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indicesOfFreeBetas</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the
free betas with their index</p></li>
<li><p><strong>indicesOfFixedBetas</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
fixed betas with their index</p></li>
<li><p><strong>indicesOfRandomVariables</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
random variables with their index</p></li>
<li><p><strong>indicesOfDraws</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the draws with
their index</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.BinaryOperator">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">BinaryOperator</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.BinaryOperator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Expression</span></code></a></p>
<p>Base class for arithmetic expressions that are binary operators.
This expression is the result of the combination of two expressions,
typically addition, substraction, multiplication or division.</p>
<dl class="method">
<dt id="biogeme.expressions.BinaryOperator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.BinaryOperator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.DefineVariable">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">DefineVariable</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">expression</em>, <em class="sig-param">database</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.DefineVariable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Variable" title="biogeme.expressions.Variable"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Variable</span></code></a></p>
<p>Expression that defines a new variable and add a column in the database.</p>
<p>This expression allows the use to define a new variable that
will be added to the database. It avoids that it is
recalculated each time it is needed.</p>
<dl class="method">
<dt id="biogeme.expressions.DefineVariable.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">expression</em>, <em class="sig-param">database</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.DefineVariable.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – name of the variable.</p></li>
<li><p><strong>expression</strong> – formula that defines the variable</p></li>
<li><p><strong>type</strong> – biogeme.expressions.Expression</p></li>
<li><p><strong>database</strong> (<a class="reference internal" href="#biogeme.database.Database" title="biogeme.database.Database"><em>biogeme.database.Database</em></a>) – object identifying the database.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Derive">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Derive</code><span class="sig-paren">(</span><em class="sig-param">child</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Derive" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.UnaryOperator" title="biogeme.expressions.UnaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.UnaryOperator</span></code></a></p>
<p>Derivative with respect to an elementary expression</p>
<dl class="method">
<dt id="biogeme.expressions.Derive.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">child</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Derive.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>child</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Derive.getSignature">
<code class="sig-name descname">getSignature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Derive.getSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>The signature of a string characterizing an expression.</p>
<p>This is designed to be communicated to C++, so that the
expression can be reconstructed in this environment.</p>
<p>The list contains the following elements:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>the signatures of the child expression,</p></li>
<li><p>the name of the expression between &lt; &gt;</p></li>
<li><p>the id of the expression between { }</p></li>
<li><p>the id of the child, preceeded by a comma.</p></li>
</ol>
</div></blockquote>
<p>Consider the following expression:</p>
<div class="math notranslate nohighlight">
\[2 \beta_1  V_1 - \frac{\exp(-\beta_2 V_2) }{ \beta_3  (\beta_2 \geq \beta_1)}.\]</div>
<p>It is defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">Variable1</span> <span class="o">-</span> <span class="n">expressions</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta2</span><span class="o">*</span><span class="n">Variable2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta3</span> <span class="o">*</span> <span class="p">(</span><span class="n">beta2</span> <span class="o">&gt;=</span> <span class="n">beta1</span><span class="p">))</span>  
</pre></div>
</div>
<p>And its signature is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;Numeric&gt;</span><span class="si">{4780527008}</span><span class="s1">,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780526952}</span><span class="s1">(2),4780527008,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837152}</span><span class="s1">&quot;Variable1&quot;,5,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527064}</span><span class="s1">(2),4780526952,4511837152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;UnaryMinus&gt;</span><span class="si">{4780527120}</span><span class="s1">(1),4780277656&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837712}</span><span class="s1">&quot;Variable2&quot;,6,3&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527176}</span><span class="s1">(2),4780527120,4511837712&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;exp&gt;</span><span class="si">{4780527232}</span><span class="s1">(1),4780527176&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277264}</span><span class="s1">&quot;beta3&quot;[1],2,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;GreaterOrEqual&gt;</span><span class="si">{4780527288}</span><span class="s1">(2),4780277656,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527344}</span><span class="s1">(2),4780277264,4780527288&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Divide&gt;</span><span class="si">{4780527400}</span><span class="s1">(2),4780527232,4780527344&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Minus&gt;</span><span class="si">{4780527456}</span><span class="s1">(2),4780527064,4780527400&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of the signatures of an expression and its children.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Derive.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Derive.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Not implemented in Python. The C++ implementation must be used insteald</p>
<p>Raises: biogeme.exceptions.biogemeError</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Derive.setUniqueId">
<code class="sig-name descname">setUniqueId</code><span class="sig-paren">(</span><em class="sig-param">idsOfElementaryExpressions</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Derive.setUniqueId" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a unique id to the elementary expressions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>idsOfElementaryExpressions</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the elementary expression with their id.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Divide">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Divide</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Divide" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Division expression</p>
<dl class="method">
<dt id="biogeme.expressions.Divide.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Divide.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Divide.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Divide.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Elem">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Elem</code><span class="sig-paren">(</span><em class="sig-param">dictOfExpressions</em>, <em class="sig-param">keyExpression</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Elem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Expression</span></code></a></p>
<p>This returns the element of a dictionary. The key is evaluated
from an expression.</p>
<dl class="method">
<dt id="biogeme.expressions.Elem.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">dictOfExpressions</em>, <em class="sig-param">keyExpression</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Elem.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dictOfExpressions</strong> (<em>dict</em><em>(</em><em>int: biogeme.expressions.Expression</em><em>)</em>) – dict of objects with numerical keys.</p></li>
<li><p><strong>keyExpression</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – object providing the key of the element
to be evaluated.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Elem.getSignature">
<code class="sig-name descname">getSignature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Elem.getSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>The signature of a string characterizing an expression.</p>
<p>This is designed to be communicated to C++, so that the
expression can be reconstructed in this environment.</p>
<p>The list contains the following elements:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>the signature of the expression defining the key</p></li>
<li><p>the signatures of all the children expressions,</p></li>
<li><p>the name of the expression between &lt; &gt;</p></li>
<li><p>the id of the expression between { }</p></li>
<li><p>the number of elements between ( )</p></li>
<li><p>the id of the expression defining the key</p></li>
<li><p>for each element: the value of the key and the id of the expression, separated by commas.</p></li>
</ol>
</div></blockquote>
<p>Consider the following expression:</p>
<div class="math notranslate nohighlight">
\[2 \beta_1  V_1 - \frac{\exp(-\beta_2 V_2) }{ \beta_3  (\beta_2 \geq \beta_1)}.\]</div>
<p>It is defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">Variable1</span> <span class="o">-</span> <span class="n">expressions</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta2</span><span class="o">*</span><span class="n">Variable2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta3</span> <span class="o">*</span> <span class="p">(</span><span class="n">beta2</span> <span class="o">&gt;=</span> <span class="n">beta1</span><span class="p">))</span>  
</pre></div>
</div>
<p>And its signature is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;Numeric&gt;</span><span class="si">{4780527008}</span><span class="s1">,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780526952}</span><span class="s1">(2),4780527008,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837152}</span><span class="s1">&quot;Variable1&quot;,5,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527064}</span><span class="s1">(2),4780526952,4511837152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;UnaryMinus&gt;</span><span class="si">{4780527120}</span><span class="s1">(1),4780277656&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837712}</span><span class="s1">&quot;Variable2&quot;,6,3&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527176}</span><span class="s1">(2),4780527120,4511837712&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;exp&gt;</span><span class="si">{4780527232}</span><span class="s1">(1),4780527176&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277264}</span><span class="s1">&quot;beta3&quot;[1],2,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;GreaterOrEqual&gt;</span><span class="si">{4780527288}</span><span class="s1">(2),4780277656,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527344}</span><span class="s1">(2),4780277264,4780527288&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Divide&gt;</span><span class="si">{4780527400}</span><span class="s1">(2),4780527232,4780527344&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Minus&gt;</span><span class="si">{4780527456}</span><span class="s1">(2),4780527064,4780527400&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of the signatures of an expression and its children.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Elem.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Elem.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Elementary">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Elementary</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Elementary" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Expression</span></code></a></p>
<p>Elementary expression.</p>
<p>It is typically defined by a name appearing in an expression. It
can be a variable (from the database), or a parameter (fixed or to
be estimated using maximum likelihood), a random variable for
numrerical integration, or Monte-Carlo integration.</p>
<dl class="method">
<dt id="biogeme.expressions.Elementary.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Elementary.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>string</em>) – name of the elementary experession.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Elementary.getElementaryExpression">
<code class="sig-name descname">getElementaryExpression</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Elementary.getElementaryExpression" title="Permalink to this definition">¶</a></dt>
<dd><p>Return: an elementary expression from its name if it appears in the
expression. None otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Elementary.setUniqueId">
<code class="sig-name descname">setUniqueId</code><span class="sig-paren">(</span><em class="sig-param">idsOfElementaryExpressions</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Elementary.setUniqueId" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a unique id to the elementary expressions. Overloads the
generic function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>idsOfElementaryExpressions</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the elementary expression with their id.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Equal">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Equal</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Logical equal</p>
<dl class="method">
<dt id="biogeme.expressions.Equal.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Equal.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Equal.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Equal.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Expression">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Expression</code><a class="headerlink" href="#biogeme.expressions.Expression" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is the general arithmetic expression in biogeme. It serves as a base class for concrete expressions.</p>
<dl class="method">
<dt id="biogeme.expressions.Expression.__add__">
<code class="sig-name descname">__add__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__add__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for addition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression to be added</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self + other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__and__">
<code class="sig-name descname">__and__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__and__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for logical and.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for logical and</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self and other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__div__">
<code class="sig-name descname">__div__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__div__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for division.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for division</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self / other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__eq__">
<code class="sig-name descname">__eq__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__eq__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for comparison.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for equality</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self == other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__ge__">
<code class="sig-name descname">__ge__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__ge__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for comparison.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for greater or equal</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self &gt;= other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__gt__">
<code class="sig-name descname">__gt__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__gt__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for comparison.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for greater than</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self &gt; other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__le__">
<code class="sig-name descname">__le__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__le__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for comparison.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for less or equal</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self &lt;= other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__lt__">
<code class="sig-name descname">__lt__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__lt__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for comparison.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for less than</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self &lt; other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__mul__">
<code class="sig-name descname">__mul__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__mul__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for multiplication.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression to be multiplied</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self * other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__ne__">
<code class="sig-name descname">__ne__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__ne__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for comparison.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for difference</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self != other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__neg__">
<code class="sig-name descname">__neg__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__neg__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for unary minus.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>-self</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__or__">
<code class="sig-name descname">__or__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__or__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for logical or.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for logical or</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self or other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__pow__">
<code class="sig-name descname">__pow__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__pow__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for power.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for power</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self ^ other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__radd__">
<code class="sig-name descname">__radd__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__radd__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for addition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression to be added</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>other + self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__rdiv__">
<code class="sig-name descname">__rdiv__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__rdiv__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for division.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for division</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>other / self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__rmul__">
<code class="sig-name descname">__rmul__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__rmul__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for multiplication.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression to be multiplied</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>other * self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__rpow__">
<code class="sig-name descname">__rpow__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__rpow__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for power.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for power</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>other ^ self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__rsub__">
<code class="sig-name descname">__rsub__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__rsub__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for substraction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression to be substracted</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>other - self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__rtruediv__">
<code class="sig-name descname">__rtruediv__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__rtruediv__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for division.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for division</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>other / self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__sub__">
<code class="sig-name descname">__sub__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__sub__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for substraction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression to substract</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self - other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.__truediv__">
<code class="sig-name descname">__truediv__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.__truediv__" title="Permalink to this definition">¶</a></dt>
<dd><p>Operator overloading. Generate an expression for division.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression for division</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self / other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.audit">
<code class="sig-name descname">audit</code><span class="sig-paren">(</span><em class="sig-param">database=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.audit" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs various checks on the expressions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>database</strong> (<a class="reference internal" href="#biogeme.database.Database" title="biogeme.database.Database"><em>biogeme.database.Database</em></a>) – database object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple listOfErrors,listOfWarnings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(string),list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.changeInitValues">
<code class="sig-name descname">changeInitValues</code><span class="sig-paren">(</span><em class="sig-param">betas</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.changeInitValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Modifies the initial values of the Beta parameters.</p>
<p>The fact that the parameters are fixed or free is irrelevant here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>betas</strong> (<em>dict</em><em>(</em><em>string:float</em><em>)</em>) – dictionary where the keys are the names of the
parameters, and the values are the new value for
the parameters.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.countPanelTrajectoryExpressions">
<code class="sig-name descname">countPanelTrajectoryExpressions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.countPanelTrajectoryExpressions" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of times the PanelLikelihoodTrajectory 
is used in the formula. It should trigger an error if it
is used more than once.</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.dictOfBetas">
<code class="sig-name descname">dictOfBetas</code><span class="sig-paren">(</span><em class="sig-param">free=True</em>, <em class="sig-param">fixed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.dictOfBetas" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the set of parameters from the expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>free</strong> (<em>bool</em>) – if True, the free parameters are included. Default: True.</p></li>
<li><p><strong>fixed</strong> (<em>bool</em>) – if True, the fixed parameters are included. Default: False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dict with the beta parameters appearing in the expression, the keys being the names of the parameters.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict(string:biogeme.expressions.Expression)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.dictOfDraws">
<code class="sig-name descname">dictOfDraws</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.dictOfDraws" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively extract the random variables 
(draws for Monte-Carlo)
appearing in the expression, and store them in a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict where the keys are the random variables and the elements the type of draws</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict(string:string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.dictOfRandomVariables">
<code class="sig-name descname">dictOfRandomVariables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.dictOfRandomVariables" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively extract the random variables appearing in the expression, and store them in a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>returns a dict with the random variables appearing in
the expression the keys being their names.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict(string:biogeme.expressions.Expression)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.dictOfVariables">
<code class="sig-name descname">dictOfVariables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.dictOfVariables" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively extract the variables appearing in the expression, and
store them in a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>returns a dict with the variables appearing in the expression the keys being their names.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict(string:biogeme.expressions.Expression)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.embedExpression">
<code class="sig-name descname">embedExpression</code><span class="sig-paren">(</span><em class="sig-param">t</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.embedExpression" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the expression contains an expression of type t.
Typically, this would be used to check that a MonteCarlo
expression contains a bioDraws expression.</p>
<dl class="simple">
<dt>Return: </dt><dd><p>bool.</p>
</dd>
</dl>
<p>See: Expression.isContainedIn</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.getClassName">
<code class="sig-name descname">getClassName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.getClassName" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the name of the top class of the expression structure</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the name of the class</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.getElementaryExpression">
<code class="sig-name descname">getElementaryExpression</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.getElementaryExpression" title="Permalink to this definition">¶</a></dt>
<dd><p>Return: an elementary expression from its name if it appears in the
expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>string</em>) – name of the elementary expression.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the expression if it exists. None otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.getSignature">
<code class="sig-name descname">getSignature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.getSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>The signature of a string characterizing an expression.</p>
<p>This is designed to be communicated to C++, so that the
expression can be reconstructed in this environment.</p>
<p>The list contains the following elements:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>the signatures of all the children expressions,</p></li>
<li><p>the name of the expression between &lt; &gt;</p></li>
<li><p>the id of the expression between { }</p></li>
<li><p>the number of children between ( )</p></li>
<li><p>the ids of each children, preceeded by a comma.</p></li>
</ol>
</div></blockquote>
<p>Consider the following expression:</p>
<div class="math notranslate nohighlight">
\[2 \beta_1  V_1 - \frac{\exp(-\beta_2 V_2) }{ \beta_3  (\beta_2 \geq \beta_1)}.\]</div>
<p>It is defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">Variable1</span> <span class="o">-</span> <span class="n">expressions</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta2</span><span class="o">*</span><span class="n">Variable2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta3</span> <span class="o">*</span> <span class="p">(</span><span class="n">beta2</span> <span class="o">&gt;=</span> <span class="n">beta1</span><span class="p">))</span>  
</pre></div>
</div>
<p>And its signature is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;Numeric&gt;</span><span class="si">{4780527008}</span><span class="s1">,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780526952}</span><span class="s1">(2),4780527008,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837152}</span><span class="s1">&quot;Variable1&quot;,5,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527064}</span><span class="s1">(2),4780526952,4511837152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;UnaryMinus&gt;</span><span class="si">{4780527120}</span><span class="s1">(1),4780277656&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837712}</span><span class="s1">&quot;Variable2&quot;,6,3&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527176}</span><span class="s1">(2),4780527120,4511837712&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;exp&gt;</span><span class="si">{4780527232}</span><span class="s1">(1),4780527176&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277264}</span><span class="s1">&quot;beta3&quot;[1],2,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;GreaterOrEqual&gt;</span><span class="si">{4780527288}</span><span class="s1">(2),4780277656,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527344}</span><span class="s1">(2),4780277264,4780527288&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Divide&gt;</span><span class="si">{4780527400}</span><span class="s1">(2),4780527232,4780527344&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Minus&gt;</span><span class="si">{4780527456}</span><span class="s1">(2),4780527064,4780527400&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of the signatures of an expression and its children.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.getValue_c">
<code class="sig-name descname">getValue_c</code><span class="sig-paren">(</span><em class="sig-param">database</em>, <em class="sig-param">numberOfDraws=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.getValue_c" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluation of the expression</p>
<p>In Biogeme the complexity of some expressions requires a
specific implementation, in C++. This function invokes the
C++ code to evaluate the value of the expression for a
series of entries in a database. Note that this function
will generate draws if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database</strong> (<a class="reference internal" href="#biogeme.database.Database" title="biogeme.database.Database"><em>biogeme.database.Database</em></a>) – database</p></li>
<li><p><strong>numberOfDraws</strong> (<em>int</em>) – number of draws if needed by Monte-Carlo integration.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list where each entry is the result of applying the expression on one entry of the dsatabase.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.isContainedIn">
<code class="sig-name descname">isContainedIn</code><span class="sig-paren">(</span><em class="sig-param">t</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.isContainedIn" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the expression is contained in an expression of type t.
Typically, this would be used to check that a bioDraws
expression is contained in a MonteCarlo expression. If not, it
cannot be evaluated.</p>
<dl class="simple">
<dt>Return: </dt><dd><p>bool.</p>
</dd>
</dl>
<p>See: Expression.embedExpression</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.setOfBetas">
<code class="sig-name descname">setOfBetas</code><span class="sig-paren">(</span><em class="sig-param">free=True</em>, <em class="sig-param">fixed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.setOfBetas" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the set of parameters from the expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>free</strong> (<em>bool</em>) – if True, the free parameters are included. Default: True.</p></li>
<li><p><strong>fixed</strong> (<em>bool</em>) – if True, the fixed parameters are included. Default: False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>returns a set with the beta parameters appearing in the expression.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>set(<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.setOfVariables">
<code class="sig-name descname">setOfVariables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.setOfVariables" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the set of variables used in the expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>returns a set with the variables appearing in the expression.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>set(<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.setRow">
<code class="sig-name descname">setRow</code><span class="sig-paren">(</span><em class="sig-param">row</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.setRow" title="Permalink to this definition">¶</a></dt>
<dd><p>This function identifies the row of the database from which the values of the variables must be obtained.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>row</strong> (<em>int</em>) – id of the row.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.setSpecificIndices">
<code class="sig-name descname">setSpecificIndices</code><span class="sig-paren">(</span><em class="sig-param">indicesOfFreeBetas</em>, <em class="sig-param">indicesOfFixedBetas</em>, <em class="sig-param">indicesOfRandomVariables</em>, <em class="sig-param">indicesOfDraws</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.setSpecificIndices" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides an index to all elementary expressions, specific to their type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indicesOfFreeBetas</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the
free betas with their index</p></li>
<li><p><strong>indicesOfFixedBetas</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
fixed betas with their index</p></li>
<li><p><strong>indicesOfRandomVariables</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
random variables with their index</p></li>
<li><p><strong>indicesOfDraws</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the draws with
their index</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.setUniqueId">
<code class="sig-name descname">setUniqueId</code><span class="sig-paren">(</span><em class="sig-param">idsOfElementaryExpressions</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.setUniqueId" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a unique id to the elementary expressions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>idsOfElementaryExpressions</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the elementary expression with their id.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Expression.setVariableIndices">
<code class="sig-name descname">setVariableIndices</code><span class="sig-paren">(</span><em class="sig-param">indicesOfVariables</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Expression.setVariableIndices" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide an index to all variables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indicesOfVariables</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
variables with their index</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Greater">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Greater</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Greater" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Logical greater</p>
<dl class="method">
<dt id="biogeme.expressions.Greater.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Greater.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Greater.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Greater.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.GreaterOrEqual">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">GreaterOrEqual</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.GreaterOrEqual" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Logical greater or equal</p>
<dl class="method">
<dt id="biogeme.expressions.GreaterOrEqual.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.GreaterOrEqual.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.GreaterOrEqual.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.GreaterOrEqual.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Integrate">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Integrate</code><span class="sig-paren">(</span><em class="sig-param">child</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Integrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.UnaryOperator" title="biogeme.expressions.UnaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.UnaryOperator</span></code></a></p>
<p>Numerical integration</p>
<dl class="method">
<dt id="biogeme.expressions.Integrate.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">child</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Integrate.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>child</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>name</strong> (<em>string</em>) – name of the random variable for the integration.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Integrate.audit">
<code class="sig-name descname">audit</code><span class="sig-paren">(</span><em class="sig-param">database=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Integrate.audit" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs various checks on the expressions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>database</strong> (<a class="reference internal" href="#biogeme.database.Database" title="biogeme.database.Database"><em>biogeme.database.Database</em></a>) – database object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple listOfErrors,listOfWarnings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(string),list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Integrate.getSignature">
<code class="sig-name descname">getSignature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Integrate.getSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>The signature of a string characterizing an expression.</p>
<p>This is designed to be communicated to C++, so that the
expression can be reconstructed in this environment.</p>
<p>The list contains the following elements:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>the signatures of the child expression,</p></li>
<li><p>the name of the expression between &lt; &gt;</p></li>
<li><p>the id of the expression between { }, preceeded by a comma</p></li>
<li><p>the id of the children, preceeded by a comma</p></li>
<li><p>the index of the randon variable, preceeded by a comma</p></li>
</ol>
</div></blockquote>
<p>Consider the following expression:</p>
<div class="math notranslate nohighlight">
\[2 \beta_1  V_1 - \frac{\exp(-\beta_2 V_2) }{ \beta_3  (\beta_2 \geq \beta_1)}.\]</div>
<p>It is defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">Variable1</span> <span class="o">-</span> <span class="n">expressions</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta2</span><span class="o">*</span><span class="n">Variable2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta3</span> <span class="o">*</span> <span class="p">(</span><span class="n">beta2</span> <span class="o">&gt;=</span> <span class="n">beta1</span><span class="p">))</span>  
</pre></div>
</div>
<p>And its signature is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;Numeric&gt;</span><span class="si">{4780527008}</span><span class="s1">,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780526952}</span><span class="s1">(2),4780527008,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837152}</span><span class="s1">&quot;Variable1&quot;,5,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527064}</span><span class="s1">(2),4780526952,4511837152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;UnaryMinus&gt;</span><span class="si">{4780527120}</span><span class="s1">(1),4780277656&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837712}</span><span class="s1">&quot;Variable2&quot;,6,3&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527176}</span><span class="s1">(2),4780527120,4511837712&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;exp&gt;</span><span class="si">{4780527232}</span><span class="s1">(1),4780527176&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277264}</span><span class="s1">&quot;beta3&quot;[1],2,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;GreaterOrEqual&gt;</span><span class="si">{4780527288}</span><span class="s1">(2),4780277656,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527344}</span><span class="s1">(2),4780277264,4780527288&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Divide&gt;</span><span class="si">{4780527400}</span><span class="s1">(2),4780527232,4780527344&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Minus&gt;</span><span class="si">{4780527456}</span><span class="s1">(2),4780527064,4780527400&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of the signatures of an expression and its children.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Integrate.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Integrate.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Not implementedin Python. The C++ implementation must be used insteald</p>
<p>Raises: biogeme.exceptions.biogemeError</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Integrate.setSpecificIndices">
<code class="sig-name descname">setSpecificIndices</code><span class="sig-paren">(</span><em class="sig-param">indicesOfFreeBetas</em>, <em class="sig-param">indicesOfFixedBetas</em>, <em class="sig-param">indicesOfRandomVariables</em>, <em class="sig-param">indicesOfDraws</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Integrate.setSpecificIndices" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide an index to all elementary expressions, specific to their type
Overloads the generic function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indicesOfFreeBetas</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the
free betas with their index</p></li>
<li><p><strong>indicesOfFixedBetas</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
fixed betas with their index</p></li>
<li><p><strong>indicesOfRandomVariables</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
random variables with their index</p></li>
<li><p><strong>indicesOfDraws</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the draws with
their index</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Integrate.setUniqueId">
<code class="sig-name descname">setUniqueId</code><span class="sig-paren">(</span><em class="sig-param">idsOfElementaryExpressions</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Integrate.setUniqueId" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a unique id to the elementary expressions. Overloads the generic function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>idsOfElementaryExpressions</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the elementary expression with their id.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Less">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Less</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Less" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Logical less</p>
<dl class="method">
<dt id="biogeme.expressions.Less.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Less.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Less.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Less.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.LessOrEqual">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">LessOrEqual</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.LessOrEqual" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Logical less or equal</p>
<dl class="method">
<dt id="biogeme.expressions.LessOrEqual.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.LessOrEqual.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.LessOrEqual.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.LessOrEqual.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.LogLogit">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">LogLogit</code><span class="sig-paren">(</span><em class="sig-param">util</em>, <em class="sig-param">av</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.LogLogit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Expression</span></code></a></p>
<p>Expression capturing the logit formula.</p>
<p>It contains one formula for the target alternative, a dict of
formula for the availabilities and a dict of formulas for the
utilities</p>
<dl class="method">
<dt id="biogeme.expressions.LogLogit.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">util</em>, <em class="sig-param">av</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.LogLogit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>util</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dictionary where the keys are the identifiers of
the alternatives, and the elements are objects
defining the utility functions.</p></li>
<li><p><strong>av</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dictionary where the keys are the identifiers of
the alternatives, and the elements are object of
type biogeme.expressions.Expression defining the
availability conditions. If av is None, all the
alternatives are assumed to be always available</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – formula to obtain the alternative for which the
logit probability must be calculated.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.LogLogit.audit">
<code class="sig-name descname">audit</code><span class="sig-paren">(</span><em class="sig-param">database</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.LogLogit.audit" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs various checks on the expressions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>database</strong> (<a class="reference internal" href="#biogeme.database.Database" title="biogeme.database.Database"><em>biogeme.database.Database</em></a>) – database object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple listOfErrors,listOfWarnings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(string),list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.LogLogit.getSignature">
<code class="sig-name descname">getSignature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.LogLogit.getSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>The signature of a string characterizing an expression.</p>
<p>This is designed to be communicated to C++, so that the
expression can be reconstructed in this environment.</p>
<p>The list contains the following elements:</p>
<blockquote>
<div><ol class="arabic">
<li><p>the signatures of all the children expressions,</p></li>
<li><p>the name of the expression between &lt; &gt;</p></li>
<li><p>the id of the expression between { }</p></li>
<li><p>the number of alternatives between ( )</p></li>
<li><p>the id of the expression for the chosen alternative, preceeded by a comma.</p></li>
<li><p>for each alternative, separated by commas:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>the number of the alternative, as defined by the user,</p></li>
<li><p>the id of the expression for the utility,</p></li>
<li><p>the id of the expression for the availability condition.</p></li>
</ol>
</div></blockquote>
</li>
</ol>
</div></blockquote>
<p>Consider the following expression:</p>
<div class="math notranslate nohighlight">
\[2 \beta_1  V_1 - \frac{\exp(-\beta_2 V_2) }{ \beta_3  (\beta_2 \geq \beta_1)}.\]</div>
<p>It is defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">Variable1</span> <span class="o">-</span> <span class="n">expressions</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta2</span><span class="o">*</span><span class="n">Variable2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta3</span> <span class="o">*</span> <span class="p">(</span><span class="n">beta2</span> <span class="o">&gt;=</span> <span class="n">beta1</span><span class="p">))</span>  
</pre></div>
</div>
<p>And its signature is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;Numeric&gt;</span><span class="si">{4780527008}</span><span class="s1">,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780526952}</span><span class="s1">(2),4780527008,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837152}</span><span class="s1">&quot;Variable1&quot;,5,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527064}</span><span class="s1">(2),4780526952,4511837152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;UnaryMinus&gt;</span><span class="si">{4780527120}</span><span class="s1">(1),4780277656&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837712}</span><span class="s1">&quot;Variable2&quot;,6,3&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527176}</span><span class="s1">(2),4780527120,4511837712&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;exp&gt;</span><span class="si">{4780527232}</span><span class="s1">(1),4780527176&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277264}</span><span class="s1">&quot;beta3&quot;[1],2,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;GreaterOrEqual&gt;</span><span class="si">{4780527288}</span><span class="s1">(2),4780277656,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527344}</span><span class="s1">(2),4780277264,4780527288&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Divide&gt;</span><span class="si">{4780527400}</span><span class="s1">(2),4780527232,4780527344&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Minus&gt;</span><span class="si">{4780527456}</span><span class="s1">(2),4780527064,4780527400&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of the signatures of an expression and its children.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.LogLogit.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.LogLogit.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Minus">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Minus</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Minus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Substraction expression</p>
<dl class="method">
<dt id="biogeme.expressions.Minus.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Minus.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Minus.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Minus.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.MonteCarlo">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">MonteCarlo</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.MonteCarlo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.UnaryOperator" title="biogeme.expressions.UnaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.UnaryOperator</span></code></a></p>
<p>Monte Carlo integration</p>
<dl class="method">
<dt id="biogeme.expressions.MonteCarlo.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.MonteCarlo.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>child</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.MonteCarlo.audit">
<code class="sig-name descname">audit</code><span class="sig-paren">(</span><em class="sig-param">database=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.MonteCarlo.audit" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs various checks on the expressions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>database</strong> (<a class="reference internal" href="#biogeme.database.Database" title="biogeme.database.Database"><em>biogeme.database.Database</em></a>) – database object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple listOfErrors,listOfWarnings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(string),list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.MonteCarlo.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.MonteCarlo.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Not implementedin Python. The C++ implementation must be used insteald</p>
<p>Raises: biogeme.exceptions.biogemeError</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.NotEqual">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">NotEqual</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.NotEqual" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Logical not equal</p>
<dl class="method">
<dt id="biogeme.expressions.NotEqual.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.NotEqual.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.NotEqual.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.NotEqual.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Numeric">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Numeric</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Numeric" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Expression</span></code></a></p>
<p>Numerical expression for a simple number</p>
<dl class="method">
<dt id="biogeme.expressions.Numeric.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Numeric.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>float</em>) – numerical value</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Numeric.getSignature">
<code class="sig-name descname">getSignature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Numeric.getSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>The signature of a string characterizing an expression.</p>
<p>This is designed to be communicated to C++, so that the
expression can be reconstructed in this environment.</p>
<p>The list contains the following elements:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>the name of the expression between &lt; &gt;</p></li>
<li><p>the id of the expression between { }</p></li>
<li><p>the value, preceeded by a comma.</p></li>
</ol>
</div></blockquote>
<p>Consider the following expression:</p>
<div class="math notranslate nohighlight">
\[2 \beta_1  V_1 - \frac{\exp(-\beta_2 V_2) }{ \beta_3  (\beta_2 \geq \beta_1)}.\]</div>
<p>It is defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">Variable1</span> <span class="o">-</span> <span class="n">expressions</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta2</span><span class="o">*</span><span class="n">Variable2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta3</span> <span class="o">*</span> <span class="p">(</span><span class="n">beta2</span> <span class="o">&gt;=</span> <span class="n">beta1</span><span class="p">))</span>  
</pre></div>
</div>
<p>And its signature is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;Numeric&gt;</span><span class="si">{4780527008}</span><span class="s1">,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780526952}</span><span class="s1">(2),4780527008,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837152}</span><span class="s1">&quot;Variable1&quot;,5,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527064}</span><span class="s1">(2),4780526952,4511837152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;UnaryMinus&gt;</span><span class="si">{4780527120}</span><span class="s1">(1),4780277656&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837712}</span><span class="s1">&quot;Variable2&quot;,6,3&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527176}</span><span class="s1">(2),4780527120,4511837712&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;exp&gt;</span><span class="si">{4780527232}</span><span class="s1">(1),4780527176&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277264}</span><span class="s1">&quot;beta3&quot;[1],2,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;GreaterOrEqual&gt;</span><span class="si">{4780527288}</span><span class="s1">(2),4780277656,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527344}</span><span class="s1">(2),4780277264,4780527288&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Divide&gt;</span><span class="si">{4780527400}</span><span class="s1">(2),4780527232,4780527344&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Minus&gt;</span><span class="si">{4780527456}</span><span class="s1">(2),4780527064,4780527400&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of the signatures of an expression and its children.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Numeric.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Numeric.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Or">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Or</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Or" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Logical or</p>
<dl class="method">
<dt id="biogeme.expressions.Or.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Or.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Or.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Or.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.PanelLikelihoodTrajectory">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">PanelLikelihoodTrajectory</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.PanelLikelihoodTrajectory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.UnaryOperator" title="biogeme.expressions.UnaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.UnaryOperator</span></code></a></p>
<p>Likelihood of a sequences of observations for the same individual</p>
<dl class="method">
<dt id="biogeme.expressions.PanelLikelihoodTrajectory.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.PanelLikelihoodTrajectory.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>child</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.PanelLikelihoodTrajectory.audit">
<code class="sig-name descname">audit</code><span class="sig-paren">(</span><em class="sig-param">database=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.PanelLikelihoodTrajectory.audit" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs various checks on the expressions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>database</strong> (<a class="reference internal" href="#biogeme.database.Database" title="biogeme.database.Database"><em>biogeme.database.Database</em></a>) – database object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple listOfErrors,listOfWarnings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(string),list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.PanelLikelihoodTrajectory.countPanelTrajectoryExpressions">
<code class="sig-name descname">countPanelTrajectoryExpressions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.PanelLikelihoodTrajectory.countPanelTrajectoryExpressions" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of times the PanelLikelihoodTrajectory 
is used in the formula.</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.PanelLikelihoodTrajectory.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.PanelLikelihoodTrajectory.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Not implementedin Python. The C++ implementation must be used insteald</p>
<p>Raises: biogeme.exceptions.biogemeError</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Plus">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Plus</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Plus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Addition expression</p>
<dl class="method">
<dt id="biogeme.expressions.Plus.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Plus.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Plus.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Plus.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Power">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Power</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Power" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Power expression</p>
<dl class="method">
<dt id="biogeme.expressions.Power.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Power.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Power.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Power.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.RandomVariable">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">RandomVariable</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.RandomVariable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Elementary" title="biogeme.expressions.Elementary"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Elementary</span></code></a></p>
<p>Random variable for numerical integration</p>
<dl class="method">
<dt id="biogeme.expressions.RandomVariable.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.RandomVariable.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>string.</em>) – name of the random variable involved in the integration.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.RandomVariable.audit">
<code class="sig-name descname">audit</code><span class="sig-paren">(</span><em class="sig-param">database=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.RandomVariable.audit" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs various checks on the expressions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>database</strong> (<a class="reference internal" href="#biogeme.database.Database" title="biogeme.database.Database"><em>biogeme.database.Database</em></a>) – database object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple listOfErrors,listOfWarnings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(string),list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.RandomVariable.dictOfRandomVariables">
<code class="sig-name descname">dictOfRandomVariables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.RandomVariable.dictOfRandomVariables" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively extract the random variables appearing in the expression, and store them in a dictionary.</p>
<p>Overloads the generic function.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>returns a dict with the random variables appearing in
the expression the keys being their names.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict(string:biogeme.expressions.Expression)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.RandomVariable.getSignature">
<code class="sig-name descname">getSignature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.RandomVariable.getSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>The signature of a string characterizing an expression.</p>
<p>This is designed to be communicated to C++, so that the
expression can be reconstructed in this environment.</p>
<p>The list contains the following elements:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>the name of the expression between &lt; &gt;</p></li>
<li><p>the id of the expression between { }</p></li>
<li><p>the name of the random variable,</p></li>
<li><p>the unique ID, preceeded by a comma,</p></li>
<li><p>the ID of the random variable.</p></li>
</ol>
</div></blockquote>
<p>Consider the following expression:</p>
<div class="math notranslate nohighlight">
\[2 \beta_1  V_1 - \frac{\exp(-\beta_2 V_2) }{ \beta_3  (\beta_2 \geq \beta_1)}.\]</div>
<p>It is defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">Variable1</span> <span class="o">-</span> <span class="n">expressions</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta2</span><span class="o">*</span><span class="n">Variable2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta3</span> <span class="o">*</span> <span class="p">(</span><span class="n">beta2</span> <span class="o">&gt;=</span> <span class="n">beta1</span><span class="p">))</span>  
</pre></div>
</div>
<p>And its signature is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;Numeric&gt;</span><span class="si">{4780527008}</span><span class="s1">,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780526952}</span><span class="s1">(2),4780527008,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837152}</span><span class="s1">&quot;Variable1&quot;,5,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527064}</span><span class="s1">(2),4780526952,4511837152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;UnaryMinus&gt;</span><span class="si">{4780527120}</span><span class="s1">(1),4780277656&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837712}</span><span class="s1">&quot;Variable2&quot;,6,3&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527176}</span><span class="s1">(2),4780527120,4511837712&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;exp&gt;</span><span class="si">{4780527232}</span><span class="s1">(1),4780527176&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277264}</span><span class="s1">&quot;beta3&quot;[1],2,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;GreaterOrEqual&gt;</span><span class="si">{4780527288}</span><span class="s1">(2),4780277656,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527344}</span><span class="s1">(2),4780277264,4780527288&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Divide&gt;</span><span class="si">{4780527400}</span><span class="s1">(2),4780527232,4780527344&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Minus&gt;</span><span class="si">{4780527456}</span><span class="s1">(2),4780527064,4780527400&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of the signatures of an expression and its children.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(string)</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if no id has been defined for elementary expression</p></li>
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if no id has been defined for random variable</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.RandomVariable.setSpecificIndices">
<code class="sig-name descname">setSpecificIndices</code><span class="sig-paren">(</span><em class="sig-param">indicesOfFreeBetas</em>, <em class="sig-param">indicesOfFixedBetas</em>, <em class="sig-param">indicesOfRandomVariables</em>, <em class="sig-param">indicesOfDraws</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.RandomVariable.setSpecificIndices" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide an index to all elementary expressions, specific to their type
Overloads the generic function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indicesOfFreeBetas</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the
free betas with their index</p></li>
<li><p><strong>indicesOfFixedBetas</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
fixed betas with their index</p></li>
<li><p><strong>indicesOfRandomVariables</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
random variables with their index</p></li>
<li><p><strong>indicesOfDraws</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the draws with
their index</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Times">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Times</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Times" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Multiplication expression</p>
<dl class="method">
<dt id="biogeme.expressions.Times.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Times.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Times.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Times.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.UnaryMinus">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">UnaryMinus</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.UnaryMinus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.UnaryOperator" title="biogeme.expressions.UnaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.UnaryOperator</span></code></a></p>
<p>Unary minus expression</p>
<dl class="method">
<dt id="biogeme.expressions.UnaryMinus.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.UnaryMinus.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>child</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.UnaryMinus.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.UnaryMinus.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.UnaryOperator">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">UnaryOperator</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.UnaryOperator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Expression</span></code></a></p>
<p>Base class for arithmetic expressions that are unary operators.</p>
<p>Such an expression is the result of the modification of another
expressions, typically changing its sign.</p>
<dl class="method">
<dt id="biogeme.expressions.UnaryOperator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.UnaryOperator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>child</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.Variable">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">Variable</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Elementary" title="biogeme.expressions.Elementary"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Elementary</span></code></a></p>
<p>Explanatory variable</p>
<p>This represents the explanatory variables of the choice
model. Typically, they come from the data set.</p>
<dl class="method">
<dt id="biogeme.expressions.Variable.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Variable.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>string</em>) – name of the variable.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Variable.audit">
<code class="sig-name descname">audit</code><span class="sig-paren">(</span><em class="sig-param">database</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Variable.audit" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs various checks on the expressions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>database</strong> (<a class="reference internal" href="#biogeme.database.Database" title="biogeme.database.Database"><em>biogeme.database.Database</em></a>) – database object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple listOfErrors,listOfWarnings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(string),list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Variable.dictOfVariables">
<code class="sig-name descname">dictOfVariables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Variable.dictOfVariables" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively extract the variables appearing in the expression, and
store them in a dictionary.</p>
<p>Overload the generic function.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>returns a dict with the variables appearing in the expression the keys being their names. Here, it contains only one element.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict(string:biogeme.expressions.Expression)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Variable.getSignature">
<code class="sig-name descname">getSignature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Variable.getSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>The signature of a string characterizing an expression.</p>
<p>This is designed to be communicated to C++, so that the
expression can be reconstructed in this environment.</p>
<p>The list contains the following elements:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>the name of the expression between &lt; &gt;</p></li>
<li><p>the id of the expression between { }</p></li>
<li><p>the name of the variable,</p></li>
<li><p>the unique ID, preceeded by a comma.</p></li>
<li><p>the variabvle ID, preceeded by a comma.</p></li>
</ol>
</div></blockquote>
<p>Consider the following expression:</p>
<div class="math notranslate nohighlight">
\[2 \beta_1  V_1 - \frac{\exp(-\beta_2 V_2) }{ \beta_3  (\beta_2 \geq \beta_1)}.\]</div>
<p>It is defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">Variable1</span> <span class="o">-</span> <span class="n">expressions</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta2</span><span class="o">*</span><span class="n">Variable2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta3</span> <span class="o">*</span> <span class="p">(</span><span class="n">beta2</span> <span class="o">&gt;=</span> <span class="n">beta1</span><span class="p">))</span>  
</pre></div>
</div>
<p>And its signature is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;Numeric&gt;</span><span class="si">{4780527008}</span><span class="s1">,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780526952}</span><span class="s1">(2),4780527008,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837152}</span><span class="s1">&quot;Variable1&quot;,5,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527064}</span><span class="s1">(2),4780526952,4511837152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;UnaryMinus&gt;</span><span class="si">{4780527120}</span><span class="s1">(1),4780277656&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837712}</span><span class="s1">&quot;Variable2&quot;,6,3&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527176}</span><span class="s1">(2),4780527120,4511837712&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;exp&gt;</span><span class="si">{4780527232}</span><span class="s1">(1),4780527176&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277264}</span><span class="s1">&quot;beta3&quot;[1],2,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;GreaterOrEqual&gt;</span><span class="si">{4780527288}</span><span class="s1">(2),4780277656,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527344}</span><span class="s1">(2),4780277264,4780527288&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Divide&gt;</span><span class="si">{4780527400}</span><span class="s1">(2),4780527232,4780527344&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Minus&gt;</span><span class="si">{4780527456}</span><span class="s1">(2),4780527064,4780527400&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of the signatures of an expression and its children.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(string)</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if no id has been defined for elementary expression</p></li>
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if no id has been defined for variable</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Variable.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Variable.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.Variable.setVariableIndices">
<code class="sig-name descname">setVariableIndices</code><span class="sig-paren">(</span><em class="sig-param">indicesOfVariables</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.Variable.setVariableIndices" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide an index to all variables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indicesOfVariables</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
variables with their index</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.bioDraws">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">bioDraws</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">type</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioDraws" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Elementary" title="biogeme.expressions.Elementary"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Elementary</span></code></a></p>
<p>Draws for Monte-Carlo integration</p>
<dl class="method">
<dt id="biogeme.expressions.bioDraws.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">type</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioDraws.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – name of the random variable with a series of draws.</p></li>
<li><p><strong>type</strong> (<em>string</em>) – type of draws.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioDraws.audit">
<code class="sig-name descname">audit</code><span class="sig-paren">(</span><em class="sig-param">database=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioDraws.audit" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs various checks on the expressions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>database</strong> (<a class="reference internal" href="#biogeme.database.Database" title="biogeme.database.Database"><em>biogeme.database.Database</em></a>) – database object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple listOfErrors,listOfWarnings</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(string),list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioDraws.dictOfDraws">
<code class="sig-name descname">dictOfDraws</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioDraws.dictOfDraws" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively extract the random variables 
(draws for Monte-Carlo).  Overloads the generic function.
appearing in the expression, and store them in a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict where the keys are the random variables and the elements the type of draws. Here, contains only one element.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict(string:string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioDraws.getSignature">
<code class="sig-name descname">getSignature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioDraws.getSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>The signature of a string characterizing an expression.</p>
<p>This is designed to be communicated to C++, so that the
expression can be reconstructed in this environment.</p>
<p>The list contains the following elements:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>the name of the expression between &lt; &gt;</p></li>
<li><p>the id of the expression between { }, preceeded by a comma</p></li>
<li><p>the name of the draws</p></li>
<li><p>the unique ID (preceeded by a comma),</p></li>
<li><p>the draw ID (preceeded by a comma).</p></li>
</ol>
</div></blockquote>
<p>Consider the following expression:</p>
<div class="math notranslate nohighlight">
\[2 \beta_1  V_1 - \frac{\exp(-\beta_2 V_2) }{ \beta_3  (\beta_2 \geq \beta_1)}.\]</div>
<p>It is defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">Variable1</span> <span class="o">-</span> <span class="n">expressions</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta2</span><span class="o">*</span><span class="n">Variable2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta3</span> <span class="o">*</span> <span class="p">(</span><span class="n">beta2</span> <span class="o">&gt;=</span> <span class="n">beta1</span><span class="p">))</span>  
</pre></div>
</div>
<p>And its signature is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;Numeric&gt;</span><span class="si">{4780527008}</span><span class="s1">,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780526952}</span><span class="s1">(2),4780527008,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837152}</span><span class="s1">&quot;Variable1&quot;,5,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527064}</span><span class="s1">(2),4780526952,4511837152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;UnaryMinus&gt;</span><span class="si">{4780527120}</span><span class="s1">(1),4780277656&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837712}</span><span class="s1">&quot;Variable2&quot;,6,3&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527176}</span><span class="s1">(2),4780527120,4511837712&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;exp&gt;</span><span class="si">{4780527232}</span><span class="s1">(1),4780527176&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277264}</span><span class="s1">&quot;beta3&quot;[1],2,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;GreaterOrEqual&gt;</span><span class="si">{4780527288}</span><span class="s1">(2),4780277656,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527344}</span><span class="s1">(2),4780277264,4780527288&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Divide&gt;</span><span class="si">{4780527400}</span><span class="s1">(2),4780527232,4780527344&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Minus&gt;</span><span class="si">{4780527456}</span><span class="s1">(2),4780527064,4780527400&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of the signatures of an expression and its children.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(string)</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if no id has been defined for elementary expression</p></li>
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if no id has been defined for draw</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioDraws.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioDraws.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Not implementedin Python. The C++ implementation must be used insteald</p>
<p>Raises: biogeme.exceptions.biogemeError</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioDraws.setDrawIndex">
<code class="sig-name descname">setDrawIndex</code><span class="sig-paren">(</span><em class="sig-param">idsOfDraws</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioDraws.setDrawIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide an index to a series of draw for a random variable. Overload the generic function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>idsOfDraws</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the draws with their id.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioDraws.setSpecificIndices">
<code class="sig-name descname">setSpecificIndices</code><span class="sig-paren">(</span><em class="sig-param">indicesOfFreeBetas</em>, <em class="sig-param">indicesOfFixedBetas</em>, <em class="sig-param">indicesOfRandomVariables</em>, <em class="sig-param">indicesOfDraws</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioDraws.setSpecificIndices" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide an index to all elementary expressions, specific to their type
Overloads the generic function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indicesOfFreeBetas</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the
free betas with their index</p></li>
<li><p><strong>indicesOfFixedBetas</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
fixed betas with their index</p></li>
<li><p><strong>indicesOfRandomVariables</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the 
random variables with their index</p></li>
<li><p><strong>indicesOfDraws</strong> (<em>dict</em><em>(</em><em>string:int</em><em>)</em>) – dictionary mapping the name of the draws with
their index</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.bioLinearUtility">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">bioLinearUtility</code><span class="sig-paren">(</span><em class="sig-param">listOfTerms</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioLinearUtility" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Expression</span></code></a></p>
<p>When the utility function is linear, it is expressed as a list of
terms, where a parameter multiplies a variable.</p>
<dl class="method">
<dt id="biogeme.expressions.bioLinearUtility.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">listOfTerms</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioLinearUtility.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>listOfTerms</strong> (<em>list</em><em>(</em><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a><em>,</em><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a><em>)</em>) – a list of tuple. Each tuple contains first a beta parameter, second the name of a variable.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if the object is not
a list of tuples (parameter,variable)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioLinearUtility.dictOfBetas">
<code class="sig-name descname">dictOfBetas</code><span class="sig-paren">(</span><em class="sig-param">free=True</em>, <em class="sig-param">fixed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioLinearUtility.dictOfBetas" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the set of parameters from the expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>free</strong> (<em>bool</em>) – if True, the free parameters are included. Default: True.</p></li>
<li><p><strong>fixed</strong> (<em>bool</em>) – if True, the fixed parameters are included. Default: False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dict with the beta parameters appearing in the expression, the keys being the names of the parameters.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict(string:biogeme.expressions.Expression)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioLinearUtility.dictOfDraws">
<code class="sig-name descname">dictOfDraws</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioLinearUtility.dictOfDraws" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively extract the random variables 
(draws for Monte-Carlo).  Overloads the generic function.
appearing in the expression, and store them in a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict where the keys are the random variables and the elements the type of draws. Here, returns an empty dict.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict(string:string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioLinearUtility.dictOfRandomVariables">
<code class="sig-name descname">dictOfRandomVariables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioLinearUtility.dictOfRandomVariables" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively extract the random variables appearing in the expression, and store them in a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>returns a dict with the random variables appearing in
the expression the keys being their names.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict(string:biogeme.expressions.Expression)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioLinearUtility.dictOfVariables">
<code class="sig-name descname">dictOfVariables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioLinearUtility.dictOfVariables" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively extract the variables appearing in the expression, and
store them in a dictionary.</p>
<p>Overloads the generic function.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>returns a dict with the variables appearing in the expression the keys being their names.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict(string:biogeme.expressions.Expression)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioLinearUtility.getSignature">
<code class="sig-name descname">getSignature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioLinearUtility.getSignature" title="Permalink to this definition">¶</a></dt>
<dd><p>The signature of a string characterizing an expression.</p>
<p>This is designed to be communicated to C++, so that the
expression can be reconstructed in this environment.</p>
<p>The list contains the following elements:</p>
<blockquote>
<div><ol class="arabic">
<li><p>the signatures of all the children expressions,</p></li>
<li><p>the name of the expression between &lt; &gt;</p></li>
<li><p>the id of the expression between { }</p></li>
<li><p>the number of terms in the utility ( )</p></li>
<li><p>for each term:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>the id of the beta parameter</p></li>
<li><p>the unique id of the beta parameter</p></li>
<li><p>the name of the parameter</p></li>
<li><p>the id of the variable</p></li>
<li><p>the unique id of the variable</p></li>
<li><p>the name of the variable</p></li>
</ol>
</div></blockquote>
</li>
</ol>
</div></blockquote>
<p>Consider the following expression:</p>
<div class="math notranslate nohighlight">
\[2 \beta_1  V_1 - \frac{\exp(-\beta_2 V_2) }{ \beta_3  (\beta_2 \geq \beta_1)}.\]</div>
<p>It is defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">*</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">Variable1</span> <span class="o">-</span> <span class="n">expressions</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">beta2</span><span class="o">*</span><span class="n">Variable2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">beta3</span> <span class="o">*</span> <span class="p">(</span><span class="n">beta2</span> <span class="o">&gt;=</span> <span class="n">beta1</span><span class="p">))</span>  
</pre></div>
</div>
<p>And its signature is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="sa">b</span><span class="s1">&#39;&lt;Numeric&gt;</span><span class="si">{4780527008}</span><span class="s1">,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780526952}</span><span class="s1">(2),4780527008,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837152}</span><span class="s1">&quot;Variable1&quot;,5,2&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527064}</span><span class="s1">(2),4780526952,4511837152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;UnaryMinus&gt;</span><span class="si">{4780527120}</span><span class="s1">(1),4780277656&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Variable&gt;</span><span class="si">{4511837712}</span><span class="s1">&quot;Variable2&quot;,6,3&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527176}</span><span class="s1">(2),4780527120,4511837712&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;exp&gt;</span><span class="si">{4780527232}</span><span class="s1">(1),4780527176&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277264}</span><span class="s1">&quot;beta3&quot;[1],2,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277656}</span><span class="s1">&quot;beta2&quot;[0],1,1&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Beta&gt;</span><span class="si">{4780277152}</span><span class="s1">&quot;beta1&quot;[0],0,0&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;GreaterOrEqual&gt;</span><span class="si">{4780527288}</span><span class="s1">(2),4780277656,4780277152&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Times&gt;</span><span class="si">{4780527344}</span><span class="s1">(2),4780277264,4780527288&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Divide&gt;</span><span class="si">{4780527400}</span><span class="s1">(2),4780527232,4780527344&#39;</span><span class="p">,</span>
 <span class="sa">b</span><span class="s1">&#39;&lt;Minus&gt;</span><span class="si">{4780527456}</span><span class="s1">(2),4780527064,4780527400&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of the signatures of an expression and its children.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioLinearUtility.setOfBetas">
<code class="sig-name descname">setOfBetas</code><span class="sig-paren">(</span><em class="sig-param">free=True</em>, <em class="sig-param">fixed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioLinearUtility.setOfBetas" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the set of parameters from the expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>free</strong> (<em>bool</em>) – if True, the free parameters are included. Default: True.</p></li>
<li><p><strong>fixed</strong> (<em>bool</em>) – if True, the fixed parameters are included. Default: False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>returns a set with the beta parameters appearing in the expression.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>set(<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.bioMax">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">bioMax</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioMax" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Maximum of two expressions</p>
<dl class="method">
<dt id="biogeme.expressions.bioMax.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioMax.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioMax.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioMax.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.bioMin">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">bioMin</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioMin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.BinaryOperator" title="biogeme.expressions.BinaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.BinaryOperator</span></code></a></p>
<p>Minimum of two expressions</p>
<dl class="method">
<dt id="biogeme.expressions.bioMin.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">left</em>, <em class="sig-param">right</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioMin.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>left</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p></li>
<li><p><strong>right</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – second arithmetic expression</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioMin.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioMin.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.bioMultSum">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">bioMultSum</code><span class="sig-paren">(</span><em class="sig-param">listOfExpressions</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioMultSum" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.Expression</span></code></a></p>
<p>This expression returns the sum of several other expressions.</p>
<p>It is a generalization of ‘Plus’ for more than two terms</p>
<dl class="method">
<dt id="biogeme.expressions.bioMultSum.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">listOfExpressions</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioMultSum.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>listOfExpressions</strong> (<em>list</em><em>(</em><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a><em>)</em>) – list of objects representing the
terms of the sum.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioMultSum.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioMultSum.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.bioNormalCdf">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">bioNormalCdf</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioNormalCdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.UnaryOperator" title="biogeme.expressions.UnaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.UnaryOperator</span></code></a></p>
<p>Cumulative Distribution Function of a normal random variable</p>
<dl class="method">
<dt id="biogeme.expressions.bioNormalCdf.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioNormalCdf.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>child</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioNormalCdf.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioNormalCdf.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Not implementedin Python. The C++ implementation must be used insteald</p>
<p>Raises: biogeme.exceptions.biogemeError</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.bioNormalPdf">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">bioNormalPdf</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioNormalPdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.UnaryOperator" title="biogeme.expressions.UnaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.UnaryOperator</span></code></a></p>
<p>Probability density function of a normal random variable</p>
<dl class="method">
<dt id="biogeme.expressions.bioNormalPdf.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioNormalPdf.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>child</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.bioNormalPdf.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.bioNormalPdf.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Not implementedin Python. The C++ implementation must be used insteald</p>
<p>Raises: biogeme.exceptions.biogemeError</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="biogeme.expressions.defineNumberingOfElementaryExpressions">
<code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">defineNumberingOfElementaryExpressions</code><span class="sig-paren">(</span><em class="sig-param">collectionOfFormulas</em>, <em class="sig-param">variableNames</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.defineNumberingOfElementaryExpressions" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides indices for elementary expressions</p>
<p>The numbering is done in the following order:</p>
<blockquote>
<div><blockquote>
<div><ol class="lowerroman simple">
<li><p>free betas,</p></li>
<li><p>fixed betas,</p></li>
<li><p>random variables for numrerical integration,</p></li>
<li><p>random variables for Monte-Carlo integration,</p></li>
<li><p>variables</p></li>
</ol>
</div></blockquote>
<p>The numbering convention will be performed for all expressions
together, so that the same elementary expressions in several
expressions will have the same index.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collectionOfFormula</strong> (<em>list</em><em>(</em><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a><em>)</em>) – collection of Biogeme expressions.</p></li>
<li><p><strong>variableNames</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – list of the names of the variables</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>dict,free,freeNames,fixed,fixedNames,rv,rvNames,draws,drawsNames where</p>
<ul class="simple">
<li><p>dict is a dictionary mapping the names of the elementary expressions with their index,</p></li>
<li><p>free is a dict with the free betas,</p></li>
<li><p>freeNames is a list of the names of the free betas,</p></li>
<li><p>fixed is a dict with the fixed betas,</p></li>
<li><p>fixedNames is the list of the names of the fixed betas,</p></li>
<li><p>rv is a dict with the random variables for numerical integration,</p></li>
<li><p>rvNames is a list with their names,</p></li>
<li><p>draws is a dict of the draws, and</p></li>
<li><p>drawsNames is a list with their names.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.exp">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">exp</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.exp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.UnaryOperator" title="biogeme.expressions.UnaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.UnaryOperator</span></code></a></p>
<p>exponential expression</p>
<dl class="method">
<dt id="biogeme.expressions.exp.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.exp.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>child</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.exp.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.exp.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="biogeme.expressions.isNumeric">
<code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">isNumeric</code><span class="sig-paren">(</span><em class="sig-param">obj</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.isNumeric" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies if an object is numeric, that is int, float or bool.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> – any object</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="biogeme.expressions.log">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.expressions.</code><code class="sig-name descname">log</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#biogeme.expressions.UnaryOperator" title="biogeme.expressions.UnaryOperator"><code class="xref py py-class docutils literal notranslate"><span class="pre">biogeme.expressions.UnaryOperator</span></code></a></p>
<p>logarithm expression</p>
<dl class="method">
<dt id="biogeme.expressions.log.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">child</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.log.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>child</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – first arithmetic expression</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.expressions.log.getValue">
<code class="sig-name descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.expressions.log.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the value of the expression</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>value of the expression</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-biogeme.filenames">
<span id="biogeme-filenames-module"></span><h2>biogeme.filenames module<a class="headerlink" href="#module-biogeme.filenames" title="Permalink to this headline">¶</a></h2>
<p>Implements the function providing names for the output files.</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Tue Mar 26 16:48:40 2019</p>
</dd>
</dl>
<dl class="function">
<dt id="biogeme.filenames.getNewFileName">
<code class="sig-prename descclassname">biogeme.filenames.</code><code class="sig-name descname">getNewFileName</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">ext</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.filenames.getNewFileName" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Generate a file name that does not exist.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – name of the file.</p></li>
<li><p><strong>ext</strong> (<em>string</em>) – file extension.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name.ext if the file does not exists.  If it does, returns
name~xx.ext, where xx is the smallest integer such that the
corresponding file does not exist. It is designed to avoid erasing
output files inadvertently.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-biogeme.loglikelihood">
<span id="biogeme-loglikelihood-module"></span><h2>biogeme.loglikelihood module<a class="headerlink" href="#module-biogeme.loglikelihood" title="Permalink to this headline">¶</a></h2>
<p>Functions to calculate the log likelihood</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Fri Mar 29 17:11:44 2019</p>
</dd>
</dl>
<dl class="function">
<dt id="biogeme.loglikelihood.likelihoodregression">
<code class="sig-prename descclassname">biogeme.loglikelihood.</code><code class="sig-name descname">likelihoodregression</code><span class="sig-paren">(</span><em class="sig-param">meas</em>, <em class="sig-param">model</em>, <em class="sig-param">sigma</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.loglikelihood.likelihoodregression" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes likelihood function of a regression model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>meas</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – An expression providing the value <span class="math notranslate nohighlight">\(y\)</span> of the measure for the current observation.</p></li>
<li><p><strong>model</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – An expression providing the output <span class="math notranslate nohighlight">\(m\)</span> of the model for the current observation.</p></li>
<li><p><strong>sigma</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – An expression (typically, a parameter) providing the standard error <span class="math notranslate nohighlight">\(\sigma\)</span> of the error term.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The likelihood of the regression, assuming a normal distribution, that is</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\frac{1}{\sigma} \phi\left( \frac{y-m}{\sigma} \right) \]</div>
<p>where <span class="math notranslate nohighlight">\(\phi(\cdot)\)</span> is the pdf of the normal distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.loglikelihood.loglikelihood">
<code class="sig-prename descclassname">biogeme.loglikelihood.</code><code class="sig-name descname">loglikelihood</code><span class="sig-paren">(</span><em class="sig-param">prob</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.loglikelihood.loglikelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Simply computes the log of the probability</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>prob</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – An expression providing the value of the probability.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the logarithm of the probability.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.loglikelihood.loglikelihoodregression">
<code class="sig-prename descclassname">biogeme.loglikelihood.</code><code class="sig-name descname">loglikelihoodregression</code><span class="sig-paren">(</span><em class="sig-param">meas</em>, <em class="sig-param">model</em>, <em class="sig-param">sigma</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.loglikelihood.loglikelihoodregression" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes log likelihood function of a regression model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>meas</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – An expression providing the value <span class="math notranslate nohighlight">\(y\)</span> of the
measure for the current observation.</p></li>
<li><p><strong>model</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – An expression providing the output <span class="math notranslate nohighlight">\(m\)</span> of the
model for the current observation.</p></li>
<li><p><strong>sigma</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – An expression (typically, a parameter) providing the standard error <span class="math notranslate nohighlight">\(\sigma\)</span> of the error term.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the likelihood of the regression, assuming a normal distribution, that is</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[-\left( \frac{(y-m)^2}{2\sigma^2} \right) - \log(\sigma) - \frac{1}{2}\log(2\pi)\]</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.loglikelihood.mixedloglikelihood">
<code class="sig-prename descclassname">biogeme.loglikelihood.</code><code class="sig-name descname">mixedloglikelihood</code><span class="sig-paren">(</span><em class="sig-param">prob</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.loglikelihood.mixedloglikelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a simulated loglikelihood function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>prob</strong> – An expression providing the value of the
probability. Although it is not formally necessary,
the expression should contain one or more random
variables of a given distribution, and therefore
is defined as</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[P(i|\xi_1,\ldots,\xi_L)\]</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the simulated loglikelihood, given by</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\ln\left(\sum_{r=1}^R P(i|\xi^r_1,\ldots,\xi^r_L) \right)\]</div>
<p>where <span class="math notranslate nohighlight">\(R\)</span> is the number of draws, and <span class="math notranslate nohighlight">\(\xi_j^r\)</span> is the rth draw of the random variable <span class="math notranslate nohighlight">\(\xi_j\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-biogeme.messaging">
<span id="biogeme-messaging-module"></span><h2>biogeme.messaging module<a class="headerlink" href="#module-biogeme.messaging" title="Permalink to this headline">¶</a></h2>
<p>Singleton managing the various levels of messages</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Mon Jul 22 16:12:00 2019</p>
</dd>
</dl>
<dl class="class">
<dt id="biogeme.messaging.Singleton">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.messaging.</code><code class="sig-name descname">Singleton</code><a class="headerlink" href="#biogeme.messaging.Singleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></p>
<p>A singleton is a class with only one instance</p>
</dd></dl>

<dl class="class">
<dt id="biogeme.messaging.bioMessage">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.messaging.</code><code class="sig-name descname">bioMessage</code><span class="sig-paren">(</span><em class="sig-param">screenLevel=0</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages the Biogeme messages</p>
<dl class="method">
<dt id="biogeme.messaging.bioMessage.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">screenLevel=0</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>screenLevel</strong> – <p>level of message that must be displayed on the screen:</p>
<ul class="simple">
<li><p>0: no output (default)</p></li>
<li><p>1: warnings only</p></li>
<li><p>2: only warnings and general information</p></li>
<li><p>3: more verbose</p></li>
<li><p>4: debug messages</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.addMessage">
<code class="sig-name descname">addMessage</code><span class="sig-paren">(</span><em class="sig-param">text</em>, <em class="sig-param">level</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.addMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<em>string</em>) – text of the message.</p></li>
<li><p><strong>level</strong> – <p>level of the message</p>
<ul>
<li><p>1: warning</p></li>
<li><p>2: general information</p></li>
<li><p>3: detailed information</p></li>
<li><p>4: debug message</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Note</dt>
<dd class="field-even"><p>adding a message of level 0 is meaningless, as it correspond to silentmode.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.createLog">
<code class="sig-name descname">createLog</code><span class="sig-paren">(</span><em class="sig-param">fileLevel=3</em>, <em class="sig-param">fileName='_biogeme'</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.createLog" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a log file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileLevel</strong> – <p>level of message that must be reported in the file:</p>
<ul>
<li><p>0: no output</p></li>
<li><p>1: warnings only</p></li>
<li><p>2: only warnings and general information</p></li>
<li><p>3: more verbose (default)</p></li>
<li><p>4: debug messages</p></li>
</ul>
</p></li>
<li><p><strong>fileName</strong> (<em>string</em>) – name of the file (without extension). Default: “_biogeme”. A file called _biogeme.log will be created.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.debug">
<code class="sig-name descname">debug</code><span class="sig-paren">(</span><em class="sig-param">text</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a debug message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> (<em>string</em>) – text of the message.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.detailed">
<code class="sig-name descname">detailed</code><span class="sig-paren">(</span><em class="sig-param">text</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.detailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a detailed message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> (<em>string</em>) – text of the message.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.general">
<code class="sig-name descname">general</code><span class="sig-paren">(</span><em class="sig-param">text</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.general" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a general message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> (<em>string</em>) – text of the message.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.setDebug">
<code class="sig-name descname">setDebug</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.setDebug" title="Permalink to this definition">¶</a></dt>
<dd><p>Set both screen and file levels to 4</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.setDetailed">
<code class="sig-name descname">setDetailed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.setDetailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Set both screen and file levels to 3</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.setFileLevel">
<code class="sig-name descname">setFileLevel</code><span class="sig-paren">(</span><em class="sig-param">level</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.setFileLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the level of messaging for the file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> (<em>int</em>) – <p>level of message that must be reported in the file:</p>
<ul class="simple">
<li><p>0: no output</p></li>
<li><p>1: warnings only</p></li>
<li><p>2: only warnings and general information</p></li>
<li><p>3: more verbose</p></li>
<li><p>4: debug messages</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.setGeneral">
<code class="sig-name descname">setGeneral</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.setGeneral" title="Permalink to this definition">¶</a></dt>
<dd><p>Set both screen and file levels to 2</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.setScreenLevel">
<code class="sig-name descname">setScreenLevel</code><span class="sig-paren">(</span><em class="sig-param">level</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.setScreenLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the level of messaging for the screen</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> (<em>int</em>) – <p>level of message that must be displayed on the screen:</p>
<ul class="simple">
<li><p>0: no output</p></li>
<li><p>1: warnings only</p></li>
<li><p>2: only warnings and general information</p></li>
<li><p>3: more verbose</p></li>
<li><p>4: debug messages</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.setSilent">
<code class="sig-name descname">setSilent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.setSilent" title="Permalink to this definition">¶</a></dt>
<dd><p>Set both screen and file levels to 0</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.setWarning">
<code class="sig-name descname">setWarning</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.setWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Set both screen and file levels to 1</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.messaging.bioMessage.warning">
<code class="sig-name descname">warning</code><span class="sig-paren">(</span><em class="sig-param">text</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.messaging.bioMessage.warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a warning</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> (<em>string</em>) – text of the message.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-biogeme.models">
<span id="biogeme-models-module"></span><h2>biogeme.models module<a class="headerlink" href="#module-biogeme.models" title="Permalink to this headline">¶</a></h2>
<p>Implements various models.</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Fri Mar 29 17:13:14 2019</p>
</dd>
</dl>
<dl class="function">
<dt id="biogeme.models.boxcox">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">boxcox</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">l</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.boxcox" title="Permalink to this definition">¶</a></dt>
<dd><p>Box-Cox transform</p>
<div class="math notranslate nohighlight">
\[B(x,\ell) = \frac{x^{\ell}-1}{\ell}. \]</div>
<p>It has the property that</p>
<div class="math notranslate nohighlight">
\[\lim_{\ell \to 0} B(x,\ell)=\log(x).\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – a variable to transform.</p></li>
<li><p><strong>l</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – parameter of the transformation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the Box-Cox transform</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.checkValidityNestedLogit">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">checkValidityNestedLogit</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">nests</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.checkValidityNestedLogit" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Verifies if the nested logit model is indeed based on a partition</dt><dd><p>of the choice set.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>A tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a list containing the list of identifiers of the alternatives belonging to the nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tuple ok,message, where the message explains the
problem is the nested structure is not OK.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple(bool, str)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.cnl">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">cnl</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.cnl" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the cross-nested logit model as a MEV model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> – dict of objects representing the availability of each
alternative, indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>a tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a dictionary mapping the alternative ids with the cross-nested parameters for the corresponding nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alphaA</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1a</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2a</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3a</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4a</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5a</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6a</span><span class="p">}</span>
<span class="n">alphaB</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1b</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2b</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3b</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4b</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5b</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6b</span><span class="p">}</span>
<span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="n">alphaA</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="n">alphaB</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>choice probability for the cross-nested logit model.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.cnl_avail">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">cnl_avail</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.cnl_avail" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as cnl. Maintained for backward compatibility</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative, indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>a tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a dictionary mapping the alternative ids with the cross-nested parameters for the corresponding nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alphaA</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1a</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2a</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3a</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4a</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5a</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6a</span><span class="p">}</span>
<span class="n">alphaB</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1b</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2b</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3b</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4b</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5b</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6b</span><span class="p">}</span>
<span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="n">alphaA</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="n">alphaB</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>choice probability for the cross-nested logit model.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.cnlmu">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">cnlmu</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">choice</em>, <em class="sig-param">mu</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.cnlmu" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the cross-nested logit model as a MEV model with the homogeneity parameters is explicitly involved</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative, indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>a tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a dictionary mapping the alternative ids with the cross-nested parameters for the corresponding nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alphaA</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1a</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2a</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3a</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4a</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5a</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6a</span><span class="p">}</span>
<span class="n">alphaB</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1b</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2b</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3b</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4b</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5b</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6b</span><span class="p">}</span>
<span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="n">alphaA</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="n">alphaB</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
<li><p><strong>mu</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – Homogeneity parameter <span class="math notranslate nohighlight">\(\mu\)</span>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>choice probability for the cross-nested logit model.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.getMevForCrossNested">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">getMevForCrossNested</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.getMevForCrossNested" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the MEV generating function for the cross-nested logit model as a MEV model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative, indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>a tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a dictionary mapping the alternative ids with the cross-nested parameters for the corresponding nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alphaA</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1a</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2a</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3a</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4a</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5a</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6a</span><span class="p">}</span>
<span class="n">alphaB</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1b</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2b</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3b</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4b</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5b</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6b</span><span class="p">}</span>
<span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="n">alphaA</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="n">alphaB</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>log of the choice probability for the cross-nested logit model.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.getMevForCrossNestedMu">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">getMevForCrossNestedMu</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">mu</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.getMevForCrossNestedMu" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the MEV generating function for the cross-nested logit model as a MEV model with the homogeneity parameters is explicitly involved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative, indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>a tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a dictionary mapping the alternative ids with the cross-nested parameters for the corresponding nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alphaA</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1a</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2a</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3a</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4a</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5a</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6a</span><span class="p">}</span>
<span class="n">alphaB</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1b</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2b</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3b</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4b</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5b</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6b</span><span class="p">}</span>
<span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="n">alphaA</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="n">alphaB</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
<li><p><strong>mu</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – Homogeneity parameter <span class="math notranslate nohighlight">\(\mu\)</span>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>log of the choice probability for the cross-nested logit model.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.getMevForNested">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">getMevForNested</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.getMevForNested" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the MEV generating function for the nested logit model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative, indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>A tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a list containing the list of identifiers of the alternatives belonging to the nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionary mapping each alternative id with the function</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\ln \frac{\partial G}{\partial y_i}(e^{V_1},\ldots,e^{V_J}) = e^{(\mu_m-1)V_i} \left(\sum_{i=1}^{J_m} e^{\mu_m V_i}\right)^{\frac{1}{\mu_m}-1}\]</div>
<p>where <span class="math notranslate nohighlight">\(m\)</span> is the (only) nest containing alternative <span class="math notranslate nohighlight">\(i\)</span>, and <span class="math notranslate nohighlight">\(G\)</span> is the MEV generating function.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict(int:biogeme.expressions.Expression)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.getMevForNestedMu">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">getMevForNestedMu</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">mu</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.getMevForNestedMu" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the MEV generating function for the nested logit model,
including the scale parameter</p>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">param V</dt>
<dd class="field-odd"><p>dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p>
</dd>
<dt class="field-even">type V</dt>
<dd class="field-even"><p>dict(int:biogeme.expressions.Expression)</p>
</dd>
<dt class="field-odd">param availability</dt>
<dd class="field-odd"><p>dict of objects representing the availability of each
alternative, indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p>
</dd>
<dt class="field-even">type availability</dt>
<dd class="field-even"><p>dict(int:biogeme.expressions.Expression)</p>
</dd>
<dt class="field-odd">param nests</dt>
<dd class="field-odd"><p>A tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul class="simple">
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a list containing the list of identifiers of the alternatives belonging to the nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</dd>
<dt class="field-even">type nests</dt>
<dd class="field-even"><p>tuple</p>
</dd>
<dt class="field-odd">param mu</dt>
<dd class="field-odd"><p>scale parameter</p>
</dd>
<dt class="field-even">type mu</dt>
<dd class="field-even"><p>biogeme.expressions.Expression</p>
</dd>
<dt class="field-odd">return</dt>
<dd class="field-odd"><p>a dictionary mapping each alternative id with the function</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\frac{\partial G}{\partial y_i}(e^{V_1},\ldots,e^{V_J}) = \mu e^{(\mu_m-1)V_i} \left(\sum_{i=1}^{J_m} e^{\mu_m V_i}\right)^{\frac{\mu}{\mu_m}-1}\]</div>
<p>where <span class="math notranslate nohighlight">\(m\)</span> is the (only) nest containing alternative <span class="math notranslate nohighlight">\(i\)</span>, and <span class="math notranslate nohighlight">\(G\)</span> is the MEV generating function.</p>
<dl class="field-list simple">
<dt class="field-odd">rtype</dt>
<dd class="field-odd"><p>dict(int:biogeme.expressions.Expression)</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.logcnl">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">logcnl</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.logcnl" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the log of the cross-nested logit model as a MEV model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative, indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>a tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a dictionary mapping the alternative ids with the cross-nested parameters for the corresponding nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alphaA</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1a</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2a</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3a</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4a</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5a</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6a</span><span class="p">}</span>
<span class="n">alphaB</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1b</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2b</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3b</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4b</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5b</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6b</span><span class="p">}</span>
<span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="n">alphaA</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="n">alphaB</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>log of the choice probability for the cross-nested logit model.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.logcnl_avail">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">logcnl_avail</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.logcnl_avail" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as logcnl. Maintained for backward compatibility</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative, indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>a tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a dictionary mapping the alternative ids with the cross-nested parameters for the corresponding nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alphaA</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1a</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2a</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3a</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4a</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5a</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6a</span><span class="p">}</span>
<span class="n">alphaB</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1b</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2b</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3b</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4b</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5b</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6b</span><span class="p">}</span>
<span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="n">alphaA</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="n">alphaB</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>log of choice probability for the cross-nested logit model.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.logcnlmu">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">logcnlmu</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">choice</em>, <em class="sig-param">mu</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.logcnlmu" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the log of the cross-nested logit model as a MEV model with the homogeneity parameters is explicitly involved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative, indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>a tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a dictionary mapping the alternative ids with the cross-nested parameters for the corresponding nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alphaA</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1a</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2a</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3a</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4a</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5a</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6a</span><span class="p">}</span>
<span class="n">alphaB</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">alpha1b</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="n">alpha2b</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="n">alpha3b</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">alpha4b</span><span class="p">,</span><span class="mi">5</span><span class="p">:</span> <span class="n">alpha5b</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="n">alpha6b</span><span class="p">}</span>
<span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="n">alphaA</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="n">alphaB</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
<li><p><strong>mu</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – Homogeneity parameter <span class="math notranslate nohighlight">\(\mu\)</span>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>log of the choice probability for the cross-nested logit model.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.logit">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">logit</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">av</em>, <em class="sig-param">i</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.logit" title="Permalink to this definition">¶</a></dt>
<dd><p>The logit model</p>
<p>The model is defined as</p>
<div class="math notranslate nohighlight">
\[\frac{a_i e^{V_i}}{\sum_{i=1}^J a_j e^{V_j}}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>av</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative (<span class="math notranslate nohighlight">\(a_i\)</span> in the above formula), indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>i</strong> (<em>int</em>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>choice probability of alternative number i.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.loglogit">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">loglogit</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">av</em>, <em class="sig-param">i</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.loglogit" title="Permalink to this definition">¶</a></dt>
<dd><p>The logarithm of the logit model</p>
<p>The model is defined as</p>
<div class="math notranslate nohighlight">
\[\frac{a_i e^{V_i}}{\sum_{i=1}^J a_j e^{V_j}}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>av</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative (<span class="math notranslate nohighlight">\(a_i\)</span> in the above formula), indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>i</strong> (<em>int</em>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>choice probability of alternative number i.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.logmev">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">logmev</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">logGi</em>, <em class="sig-param">av</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.logmev" title="Permalink to this definition">¶</a></dt>
<dd><p>Log of the choice probability for a MEV model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>logGi</strong> – a dictionary mapping each alternative id with the function</p></li>
</ul>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\ln \frac{\partial G}{\partial y_i}(e^{V_1},\ldots,e^{V_J})\]</div>
<p>where <span class="math notranslate nohighlight">\(G\)</span> is the MEV generating function. If an alternative <span class="math notranslate nohighlight">\(i\)</span> is not available, then <span class="math notranslate nohighlight">\(G_i = 0\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>av</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative (<span class="math notranslate nohighlight">\(a_i\)</span> in the above formula), indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>log of the choice probability of the MEV model, given by</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[V_i + \ln G_i(e^{V_1},\ldots,e^{V_J}) - \ln\left(\sum_j e^{V_j + \ln G_j(e^{V_1},\ldots,e^{V_J})}\right)\]</div>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.logmev_endogenousSampling">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">logmev_endogenousSampling</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">logGi</em>, <em class="sig-param">av</em>, <em class="sig-param">correction</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.logmev_endogenousSampling" title="Permalink to this definition">¶</a></dt>
<dd><p>Log of choice probability for a MEV model, including the correction for endogenous sampling as proposed by <a class="reference external" href="http://dx.doi.org/10.1016/j.trb.2007.09.003">Bierlaire, Bolduc and McFadden (2008)</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>logGi</strong> – a dictionary mapping each alternative id with the function</p></li>
</ul>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\ln \frac{\partial G}{\partial y_i}(e^{V_1},\ldots,e^{V_J})\]</div>
<p>where <span class="math notranslate nohighlight">\(G\)</span> is the MEV generating function. If an alternative <span class="math notranslate nohighlight">\(i\)</span> is not available, then <span class="math notranslate nohighlight">\(G_i = 0\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>av</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative (<span class="math notranslate nohighlight">\(a_i\)</span> in the above formula), indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>correction</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – a dict of expressions for the correstion terms
of each alternative.</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>log of the choice probability of the MEV model, given by</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[V_i + \ln G_i(e^{V_1},\ldots,e^{V_J}) + \omega_i - \ln\left(\sum_j e^{V_j + \ln G_j(e^{V_1},\ldots,e^{V_J})+ \omega_j}\right)\]</div>
<p>where <span class="math notranslate nohighlight">\(\omega_i\)</span> is the correction term for alternative <span class="math notranslate nohighlight">\(i\)</span>.</p>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.lognested">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">lognested</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.lognested" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the log of a nested logit model as a MEV model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative (<span class="math notranslate nohighlight">\(a_i\)</span> in the above formula), indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>A tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a list containing the list of identifiers of the alternatives belonging to the nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>log of choice probability for the nested logit model,
based on the derivatives of the MEV generating function produced
by the function getMevForNested</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.lognestedMevMu">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">lognestedMevMu</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">choice</em>, <em class="sig-param">mu</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.lognestedMevMu" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the log of the nested logit model as a MEV model, where mu is also a parameter, if the user wants to test different normalization schemes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative (<span class="math notranslate nohighlight">\(a_i\)</span> in the above formula), indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>A tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a list containing the list of identifiers of the alternatives belonging to the nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
<li><p><strong>mu</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression producing the value of the top-level scale parameter.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the log of the nested logit choice probability based on the following derivatives of the MEV generating function:</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\frac{\partial G}{\partial y_i}(e^{V_1},\ldots,e^{V_J}) = \mu e^{(\mu_m-1)V_i} \left(\sum_{i=1}^{J_m} e^{\mu_m V_i}\right)^{\frac{\mu}{\mu_m}-1}\]</div>
<p>where <span class="math notranslate nohighlight">\(m\)</span> is the (only) nest containing alternative <span class="math notranslate nohighlight">\(i\)</span>, and
<span class="math notranslate nohighlight">\(G\)</span> is the MEV generating function.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.mev">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">mev</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">logGi</em>, <em class="sig-param">av</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.mev" title="Permalink to this definition">¶</a></dt>
<dd><p>Choice probability for a MEV model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>logGi</strong> – a dictionary mapping each alternative id with the function</p></li>
</ul>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\ln \frac{\partial G}{\partial y_i}(e^{V_1},\ldots,e^{V_J})\]</div>
<p>where <span class="math notranslate nohighlight">\(G\)</span> is the MEV generating function. If an alternative <span class="math notranslate nohighlight">\(i\)</span> is not available, then <span class="math notranslate nohighlight">\(G_i = 0\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>av</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative (<span class="math notranslate nohighlight">\(a_i\)</span> in the above formula), indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Choice probability of the MEV model, given by</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\frac{e^{V_i + \ln G_i(e^{V_1},\ldots,e^{V_J})}}{\sum_j e^{V_j + \ln G_j(e^{V_1},\ldots,e^{V_J})}}\]</div>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.mev_endogenousSampling">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">mev_endogenousSampling</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">logGi</em>, <em class="sig-param">av</em>, <em class="sig-param">correction</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.mev_endogenousSampling" title="Permalink to this definition">¶</a></dt>
<dd><p>Choice probability for a MEV model, including the correction for endogenous sampling as proposed by <a class="reference external" href="http://dx.doi.org/10.1016/j.trb.2007.09.003">Bierlaire, Bolduc and McFadden (2008)</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>logGi</strong> – a dictionary mapping each alternative id with the function</p></li>
</ul>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\ln \frac{\partial G}{\partial y_i}(e^{V_1},\ldots,e^{V_J})\]</div>
<p>where <span class="math notranslate nohighlight">\(G\)</span> is the MEV generating function. If an alternative <span class="math notranslate nohighlight">\(i\)</span> is not available, then <span class="math notranslate nohighlight">\(G_i = 0\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>av</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative (<span class="math notranslate nohighlight">\(a_i\)</span> in the above formula), indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>correction</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – a dict of expressions for the correstion terms
of each alternative.</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>log of the choice probability of the MEV model, given by</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[V_i + \ln G_i(e^{V_1},\ldots,e^{V_J}) + \omega_i - \ln\left(\sum_j e^{V_j + \ln G_j(e^{V_1},\ldots,e^{V_J})+ \omega_j}\right)\]</div>
<p>where <span class="math notranslate nohighlight">\(\omega_i\)</span> is the correction term for alternative <span class="math notranslate nohighlight">\(i\)</span>.</p>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.nested">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">nested</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">choice</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the nested logit model as a MEV model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability
of each alternative, indexed by numerical
ids. Must be consistent with V, or None. In
this case, all alternatives are supposed to
be always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <dl class="simple">
<dt>A tuple containing as many items as nests. Each item is also a tuple containing two items</dt><dd><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a list containing the list of identifiers of the alternatives belonging to the nest.</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>choice probability for the nested logit model,
based on the derivatives of the MEV generating function produced
by the function getMevForNested</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.nestedMevMu">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">nestedMevMu</code><span class="sig-paren">(</span><em class="sig-param">V</em>, <em class="sig-param">availability</em>, <em class="sig-param">nests</em>, <em class="sig-param">choice</em>, <em class="sig-param">mu</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.nestedMevMu" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements the nested logit model as a MEV model, where mu is also
a parameter, if the user wants to test different normalization
schemes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the utility functions of
each alternative, indexed by numerical ids.</p></li>
<li><p><strong>availability</strong> (<em>dict</em><em>(</em><em>int:biogeme.expressions.Expression</em><em>)</em>) – dict of objects representing the availability of each
alternative (<span class="math notranslate nohighlight">\(a_i\)</span> in the above formula), indexed
by numerical ids. Must be consistent with V, or
None. In this case, all alternatives are supposed to be
always available.</p></li>
<li><p><strong>nests</strong> (<em>tuple</em>) – <p>A tuple containing as many items as nests. Each item is also a tuple containing two items</p>
<blockquote>
<div><ul>
<li><p>an object of type biogeme.expressions.Expression  representing the nest parameter,</p></li>
<li><p>a list containing the list of identifiers of the alternatives belonging to the nest.</p></li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nesta</span> <span class="o">=</span> <span class="n">MUA</span> <span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">nestb</span> <span class="o">=</span> <span class="n">MUB</span> <span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">nests</span> <span class="o">=</span> <span class="n">nesta</span><span class="p">,</span> <span class="n">nestb</span>
</pre></div>
</div>
</p></li>
<li><p><strong>choice</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – id of the alternative for which the probability must be
calculated.</p></li>
<li><p><strong>mu</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a>) – expression producing the value of the top-level scale parameter.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the nested logit choice probability based on the following derivatives of the MEV generating function:</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\frac{\partial G}{\partial y_i}(e^{V_1},\ldots,e^{V_J}) = \mu e^{(\mu_m-1)V_i} \left(\sum_{i=1}^{J_m} e^{\mu_m V_i}\right)^{\frac{\mu}{\mu_m}-1}\]</div>
<p>Where <span class="math notranslate nohighlight">\(m\)</span> is the (only) nest containing alternative <span class="math notranslate nohighlight">\(i\)</span>, and
<span class="math notranslate nohighlight">\(G\)</span> is the MEV generating function.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.piecewise">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">piecewise</code><span class="sig-paren">(</span><em class="sig-param">variable</em>, <em class="sig-param">thresholds</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.piecewise" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="biogeme.models.piecewiseFormula">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">piecewiseFormula</code><span class="sig-paren">(</span><em class="sig-param">variable</em>, <em class="sig-param">thresholds</em>, <em class="sig-param">initialBetas=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.piecewiseFormula" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the formula for a piecewise linear specification.</p>
<p>If there are K thresholds, K-1 variables are generated. The first
and last thresholds can be defined as None, corresponding to
<span class="math notranslate nohighlight">\(-\infty\)</span> and <span class="math notranslate nohighlight">\(+\infty\)</span>,respectively. If <span class="math notranslate nohighlight">\(t\)</span> is
the variable of interest, for each interval <span class="math notranslate nohighlight">\([a:a+b[\)</span>, we
define a variable defined as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}x_{Ti} =\left\{  \begin{array}{ll} 0 &amp; \text{if } t &lt; a \\ t-a &amp; \text{if } a \leq t &lt; a+b \\ b  &amp; \text{otherwise}  \end{array}\right. \;\;\;x_{Ti} = \max(0,\min(t-a,b)) \end{split}\]</div>
<p>New variables and new parameters are automatically created.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> – variable for which we need the piecewise linear
transform.</p></li>
<li><p><strong>thresholds</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) – list of thresholds</p></li>
<li><p><strong>initialBetas</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) – list of values to initialize the beta
parameters.  The number of entries should be
the number of thresholds, plus one. If None,
the value of zero is used. Default: none.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>expression of  the piecewise linear specification.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.piecewiseFunction">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">piecewiseFunction</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">thresholds</em>, <em class="sig-param">betas</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.piecewiseFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a piecewise linear specification.</p>
<p>If there are K thresholds, K-1 variables are generated. The first
and last thresholds can be defined as None, corresponding to
<span class="math notranslate nohighlight">\(-\infty\)</span> and <span class="math notranslate nohighlight">\(+\infty\)</span>,respectively. If <span class="math notranslate nohighlight">\(t\)</span> is
the variable of interest, for each interval <span class="math notranslate nohighlight">\([a:a+b[\)</span>, we
define a variable defined as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}x_{Ti} =\left\{  \begin{array}{ll} 0 &amp; \text{if } t &lt; a \\ t-a &amp; \text{if } a \leq t &lt; a+b \\ b  &amp; \text{otherwise}  \end{array}\right. \;\;\;x_{Ti} = \max(0,\min(t-a,b)) \end{split}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em>) – value at which the piecewise specification must be avaluated</p></li>
<li><p><strong>thresholds</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) – list of thresholds</p></li>
<li><p><strong>betas</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) – list of the beta parameters.  The number of entries
should be the number of thresholds, plus
one.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the numpy function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.models.piecewiseVariables">
<code class="sig-prename descclassname">biogeme.models.</code><code class="sig-name descname">piecewiseVariables</code><span class="sig-paren">(</span><em class="sig-param">variable</em>, <em class="sig-param">thresholds</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.models.piecewiseVariables" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the variables to include in a piecewise linear specification.</p>
<p>If there are K thresholds, K-1 variables are generated. The first
and last thresholds can be defined as None, corresponding to
<span class="math notranslate nohighlight">\(-\infty\)</span> and <span class="math notranslate nohighlight">\(+\infty\)</span>,respectively. If <span class="math notranslate nohighlight">\(t\)</span> is
the variable of interest, for each interval <span class="math notranslate nohighlight">\([a:a+b[\)</span>, we
define a variable defined as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}x_{Ti} =\left\{  \begin{array}{ll} 0 &amp; \text{if } t &lt; a \\ t-a &amp; \text{if } a \leq t &lt; a+b \\ b  &amp; \text{otherwise}  \end{array}\right. \;\;\;x_{Ti} = \max(0,\min(t-a,b)) \end{split}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression"><em>biogeme.expressions.Expression</em></a><em> or </em><em>str</em>) – variable for which we need the piecewise linear
transform. The expression itself or the name of the variable can be given.</p></li>
<li><p><strong>thresholds</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) – list of thresholds</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of variables to for the piecewise linear specification.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(<a class="reference internal" href="#biogeme.expressions.Expression" title="biogeme.expressions.Expression">biogeme.expressions.Expression</a>)</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>piecewiseFormula</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-biogeme.optimization">
<span id="biogeme-optimization-module"></span><h2>biogeme.optimization module<a class="headerlink" href="#module-biogeme.optimization" title="Permalink to this headline">¶</a></h2>
<p>Interface for the optimization algorithms.</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Fri Aug 16 11:31:43 2019</p>
</dd>
</dl>
<dl class="function">
<dt id="biogeme.optimization.bfgs">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">bfgs</code><span class="sig-paren">(</span><em class="sig-param">H</em>, <em class="sig-param">d</em>, <em class="sig-param">y</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.bfgs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the BFGS matrix. Formula (13.12) of <a class="reference external" href="http://optimizationprinciplesalgorithms.com/">Bierlaire (2015)</a> where the method proposed by <a class="reference external" href="https://link.springer.com/content/pdf/10.1007/BFb0067703.pdf">Powell (1977)</a> is applied</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>H</strong> (<em>numpy.array</em><em> (</em><em>2D</em><em>)</em>) – current approximation of the inverse of the Hessian</p></li>
<li><p><strong>d</strong> (<em>numpy.array</em><em> (</em><em>1D</em><em>)</em>) – difference between two consecutive iterates.</p></li>
<li><p><strong>y</strong> (<em>numpy.array</em><em> (</em><em>1D</em><em>)</em>) – difference between two consecutive gradients.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>updated approximation of the inverse of the Hessian.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array (2D)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.bfgsLineSearch">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">bfgsLineSearch</code><span class="sig-paren">(</span><em class="sig-param">fct</em>, <em class="sig-param">x0</em>, <em class="sig-param">initBfgs=None</em>, <em class="sig-param">eps=6.06273418136464e-06</em>, <em class="sig-param">maxiter=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.bfgsLineSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>BFGS method with inexact line search (Wolfe conditions)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fct</strong> (<a class="reference internal" href="#biogeme.optimization.functionToMinimize" title="biogeme.optimization.functionToMinimize"><em>optimization.functionToMinimize</em></a>) – object to calculate the objective function and its derivatives.</p></li>
<li><p><strong>x0</strong> (<em>numpy.array</em>) – starting point</p></li>
<li><p><strong>initBfgs</strong> (<em>numpy.array</em>) – matrix used to initialize BFGS. If None, the
identity matrix is used. Default: None.</p></li>
<li><p><strong>eps</strong> (<em>float</em>) – the algorithm stops when this precision is reached. Default: <span class="math notranslate nohighlight">\(\varepsilon^{\frac{1}{3}}\)</span></p></li>
<li><p><strong>maxiter</strong> (<em>int</em>) – the algorithm stops if this number of iterations is reached. Default: 1000</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>x, nit, nf, diagnostic where</p>
<ul class="simple">
<li><p>x is the solution generated by the algorithm,</p></li>
<li><p>nit is the number of iterations,</p></li>
<li><p>nf is the number of function evaluations,</p></li>
<li><p>diagnostic is the diagnostic provided by the algorithm.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array, int, int, string</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if the dimensions of the matrix initBfgs do not match the length of x0.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.bfgsLineSearchForBiogeme">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">bfgsLineSearchForBiogeme</code><span class="sig-paren">(</span><em class="sig-param">fct</em>, <em class="sig-param">initBetas</em>, <em class="sig-param">fixedBetas</em>, <em class="sig-param">betaIds</em>, <em class="sig-param">bounds</em>, <em class="sig-param">parameters=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.bfgsLineSearchForBiogeme" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimization interface for Biogeme, based on BFGS quasi-Newton method with LS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fct</strong> (<a class="reference internal" href="#biogeme.optimization.functionToMinimize" title="biogeme.optimization.functionToMinimize"><em>optimization.functionToMinimize</em></a>) – object to calculate the objective function and its derivatives.</p></li>
<li><p><strong>initBetas</strong> (<em>numpy.array</em>) – initial value of the parameters.</p></li>
<li><p><strong>fixedBetas</strong> (<em>numpy.array</em>) – betas that stay fixed suring the optimization.</p></li>
<li><p><strong>betaIds</strong> (<em>numpy.array</em>) – internal identifiers of the non fixed betas.</p></li>
<li><p><strong>bounds</strong> (<em>list</em><em>(</em><em>tuples</em><em>)</em>) – list of tuples (ell,u) containing the lower and upper bounds for each free parameter. Note that this algorithm does not support bound constraints. Therefore, all the bounds must be None.</p></li>
<li><p><strong>parameters</strong> (<em>dict</em><em>(</em><em>string:float</em><em> or </em><em>int</em><em>)</em>) – <p>dict of parameters to be transmitted to the  optimization routine:</p>
<ul>
<li><p>tolerance: when the relative gradient is below that threshold, the algorithm has reached convergence (default:  <span class="math notranslate nohighlight">\(\varepsilon^{\frac{1}{3}}\)</span>);</p></li>
<li><p>maxiter: the maximum number of iterations (default: 100).</p></li>
<li><p>initBfgs: the positive definite matrix that initalizes the BFGS updates. If None, the identity matrix is used. Default: None.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>tuple x, nit, nfev, message, where</p>
<ul class="simple">
<li><p>x is the solution found,</p></li>
<li><p>nit is the number of iterations performed,</p></li>
<li><p>nfev is the number of time that the objective function has been evaluated, and</p></li>
<li><p>message is the diagnostic provided by the algorithm.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array, int, int, string</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if bounds are imposed on the variables.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.bfgsTrustRegion">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">bfgsTrustRegion</code><span class="sig-paren">(</span><em class="sig-param">fct</em>, <em class="sig-param">x0</em>, <em class="sig-param">initBfgs=None</em>, <em class="sig-param">delta0=1.0</em>, <em class="sig-param">eps=6.06273418136464e-06</em>, <em class="sig-param">dl=False</em>, <em class="sig-param">maxiter=1000</em>, <em class="sig-param">eta1=0.01</em>, <em class="sig-param">eta2=0.9</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.bfgsTrustRegion" title="Permalink to this definition">¶</a></dt>
<dd><p>BFGS method with trust region</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fct</strong> (<a class="reference internal" href="#biogeme.optimization.functionToMinimize" title="biogeme.optimization.functionToMinimize"><em>optimization.functionToMinimize</em></a>) – object to calculate the objective function and its derivatives.</p></li>
<li><p><strong>x0</strong> (<em>numpy.array</em>) – starting point</p></li>
<li><p><strong>initBfgs</strong> (<em>numpy.array</em>) – matrix used to initialize BFGS. If None, the
identity matrix is used. Default: None.</p></li>
<li><p><strong>delta0</strong> (<em>float</em>) – initial radius of the trust region. Default: 100.</p></li>
<li><p><strong>eps</strong> (<em>float</em>) – the algorithm stops when this precision is reached. Default: <span class="math notranslate nohighlight">\(\varepsilon^{\frac{1}{3}}\)</span></p></li>
<li><p><strong>dl</strong> (<em>bool</em>) – If True, the Dogleg method is used to solve the
trut region subproblem. If False, the truncated conjugate
gradient is used. Default: False.</p></li>
<li><p><strong>maxiter</strong> (<em>int</em>) – the algorithm stops if this number of iterations is reached. Default: 1000.</p></li>
<li><p><strong>eta1</strong> (<em>float</em>) – threshold for failed iterations. Default: 0.01.</p></li>
<li><p><strong>eta2</strong> (<em>float</em>) – threshold for very successful iterations. Default 0.9.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple x, nit, nfev, message, where x is the solution found,
nit is the number of iterations performed, nfev is the
number of time that the objective function has been
evaluated, and message is the diagnostic provided by the
algorithm.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpay.array, int, int, string</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if the dimensions of the matrix initBfgs do not match the length of x0.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.bfgsTrustRegionForBiogeme">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">bfgsTrustRegionForBiogeme</code><span class="sig-paren">(</span><em class="sig-param">fct</em>, <em class="sig-param">initBetas</em>, <em class="sig-param">fixedBetas</em>, <em class="sig-param">betaIds</em>, <em class="sig-param">bounds</em>, <em class="sig-param">parameters=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.bfgsTrustRegionForBiogeme" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimization interface for Biogeme, based on Newton method with TR.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fct</strong> (<a class="reference internal" href="#biogeme.optimization.functionToMinimize" title="biogeme.optimization.functionToMinimize"><em>optimization.functionToMinimize</em></a>) – object to calculate the objective function and its derivatives.</p></li>
<li><p><strong>initBetas</strong> (<em>numpy.array</em>) – initial value of the parameters.</p></li>
<li><p><strong>fixedBetas</strong> (<em>numpy.array</em>) – betas that stay fixed suring the optimization.</p></li>
<li><p><strong>betaIds</strong> (<em>numpy.array</em>) – internal identifiers of the non fixed betas.</p></li>
<li><p><strong>bounds</strong> (<em>list</em><em>(</em><em>tuples</em><em>)</em>) – list of tuples (ell,u) containing the lower and upper bounds for each free parameter. Note that this algorithm does not support bound constraints. Therefore, all the bounds must be None.</p></li>
<li><p><strong>parameters</strong> (<em>dict</em><em>(</em><em>string:float</em><em> or </em><em>int</em><em>)</em>) – <p>dict of parameters to be transmitted to the  optimization routine:             
- tolerance: when the relative gradient is below that threshold, the algorithm has reached convergence (default:  <span class="math notranslate nohighlight">\(\varepsilon^{\frac{1}{3}}\)</span>);
- maxiter: the maximum number of iterations (default: 100).
- dogleg: if True, the trust region subproblem is solved using</p>
<blockquote>
<div><p>the Dogleg method. If False, it is solved using the 
truncated conjugate gradient method (default: False).</p>
</div></blockquote>
<ul>
<li><p>radius: the initial radius of the truat region (default: 1.0).</p></li>
<li><p>initBfgs: the positive definite matrix that initalizes the BFGS updates. If None, the identity matrix is used. Default: None.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>tuple x, nit, nfev, message, where</p>
<ul class="simple">
<li><p>x is the solution found,</p></li>
<li><p>nit is the number of iterations performed,</p></li>
<li><p>nfev is the number of time that the objective function has been evaluated, and</p></li>
<li><p>message is the diagnostic provided by the algorithm.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array, int, int, string</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if bounds are imposed on the variables.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.cauchyNewtonDogleg">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">cauchyNewtonDogleg</code><span class="sig-paren">(</span><em class="sig-param">g</em>, <em class="sig-param">H</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.cauchyNewtonDogleg" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Cauchy, the Newton and the dogleg points.</p>
<p>The Cauchy point is defined as</p>
<div class="math notranslate nohighlight">
\[d_c = - \frac{\nabla f(x)^T \nabla f(x)}{\nabla f(x)^T \nabla^2 f(x)\nabla f(x)} \nabla f(x)\]</div>
<p>The Newton point <span class="math notranslate nohighlight">\(d_n\)</span> verifies Newton equation:</p>
<div class="math notranslate nohighlight">
\[H_s d_n = - \nabla f(x)\]</div>
<p>where <span class="math notranslate nohighlight">\(H_s\)</span> is a positive definite matrix generated with the method by <a class="reference external" href="https://doi.org/10.1137/s105262349833266x">Schnabel and Eskow (1999)</a>.</p>
<p>The Dogleg point is</p>
<div class="math notranslate nohighlight">
\[d_d = \eta d_n\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[\eta = 0.2 + 0.8 \frac{\alpha^2}{\beta |\nabla f(x)^T d_n|}\]</div>
<p>and <span class="math notranslate nohighlight">\(\alpha= \nabla f(x)^T \nabla f(x)\)</span>, <span class="math notranslate nohighlight">\(\beta=\nabla f(x)^T \nabla^2 f(x)\nabla f(x)\)</span></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> (<em>numpy.array</em>) – gradient <span class="math notranslate nohighlight">\(\nabla f(x)\)</span></p></li>
<li><p><strong>H</strong> (<em>numpy.array</em>) – hessian <span class="math notranslate nohighlight">\(\nabla^2 f(x)\)</span></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple with Cauchy point, Newton point, Dogleg point</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array, numpy.array, numpy.array</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if the quadratic model is not convex.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.dogleg">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">dogleg</code><span class="sig-paren">(</span><em class="sig-param">g</em>, <em class="sig-param">H</em>, <em class="sig-param">delta</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.dogleg" title="Permalink to this definition">¶</a></dt>
<dd><p>Find an approximation of the trust region subproblem using the dogleg method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> (<em>numpy.array</em>) – gradient of the quadratic model.</p></li>
<li><p><strong>H</strong> (<em>numpy.array</em>) – hessian of the quadratic model.</p></li>
<li><p><strong>delta</strong> (<em>float</em>) – radius of the trust region.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>d, diagnostic where</p>
<ul>
<li><p>d is an approximate solution of the trust region subproblem</p></li>
<li><p>diagnostic is the nature of the solution:</p>
<blockquote>
<div><ul class="simple">
<li><p>-2 if negative curvature along Newton direction</p></li>
<li><p>-1 if negative curvature along Cauchy direction (i.e. along the gradient)</p></li>
<li><p>1 if partial Cauchy step</p></li>
<li><p>2 if Newton step</p></li>
<li><p>3 if partial Newton step</p></li>
<li><p>4 if Dogleg</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array, int</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="biogeme.optimization.functionToMinimize">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">functionToMinimize</code><a class="headerlink" href="#biogeme.optimization.functionToMinimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is an abstract class. The actual function to minimize must be
implemented in a concrete class deriving from this one.</p>
<dl class="method">
<dt id="biogeme.optimization.functionToMinimize.f">
<em class="property">abstract </em><code class="sig-name descname">f</code><span class="sig-paren">(</span><em class="sig-param">batch=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.functionToMinimize.f" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the value of the function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>batch</strong> (<em>float</em>) – for data driven functions (such as a log
likelikood function), it is possible to
approximate the value of the function using a
sample of the data called a batch. This argument
is a value between 0 and 1 representing the
percentage of the data that should be used for
thre random batch. If None, the full data set is
used. Default: None pass</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.optimization.functionToMinimize.f_g">
<em class="property">abstract </em><code class="sig-name descname">f_g</code><span class="sig-paren">(</span><em class="sig-param">batch=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.functionToMinimize.f_g" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the value of the function and the gradient</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>batch</strong> (<em>float</em>) – for data driven functions (such as a log
likelikood function), it is possible to
approximate the value of the function using a
sample of the data called a batch. This argument
is a value between 0 and 1 representing the
percentage of the data that should be used for
the random batch. If None, the full data set is
used. Default: None pass</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the function and the gradient</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple float, numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.optimization.functionToMinimize.f_g_bhhh">
<em class="property">abstract </em><code class="sig-name descname">f_g_bhhh</code><span class="sig-paren">(</span><em class="sig-param">batch=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.functionToMinimize.f_g_bhhh" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the value of the function, the gradient and the BHHH matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>batch</strong> (<em>float</em>) – for data driven functions (such as a log
likelikood function), it is possible to
approximate the value of the function using a
sample of the data called a batch. This argument
is a value between 0 and 1 representing the
percentage of the data that should be used for
the random batch. If None, the full data set is
used. Default: None pass</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the function, the gradient and the BHHH</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple float, numpy.array, numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.optimization.functionToMinimize.f_g_h">
<em class="property">abstract </em><code class="sig-name descname">f_g_h</code><span class="sig-paren">(</span><em class="sig-param">batch=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.functionToMinimize.f_g_h" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the value of the function, the gradient and the Hessian</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>batch</strong> (<em>float</em>) – for data driven functions (such as a log
likelikood function), it is possible to
approximate the value of the function using a
sample of the data called a batch. This argument
is a value between 0 and 1 representing the
percentage of the data that should be used for
the random batch. If None, the full data set is
used. Default: None pass</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>value of the function, the gradient and the Hessian</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple float, numpy.array, numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.optimization.functionToMinimize.setVariables">
<em class="property">abstract </em><code class="sig-name descname">setVariables</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.functionToMinimize.setVariables" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the values of the variables for which the function has to b calculated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>numpy.array</em>) – values</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.inverseBfgs">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">inverseBfgs</code><span class="sig-paren">(</span><em class="sig-param">Hinv</em>, <em class="sig-param">d</em>, <em class="sig-param">y</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.inverseBfgs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the inverse BFGS matrix. Formula (13.13) of <a class="reference external" href="http://optimizationprinciplesalgorithms.com/">Bierlaire (2015)</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Hinv</strong> (<em>numpy.array</em><em> (</em><em>2D</em><em>)</em>) – current approximation of the inverse of the Hessian</p></li>
<li><p><strong>d</strong> (<em>numpy.array</em><em> (</em><em>1D</em><em>)</em>) – difference between two consecutive iterates.</p></li>
<li><p><strong>y</strong> (<em>numpy.array</em><em> (</em><em>1D</em><em>)</em>) – difference between two consecutive gradients.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>updated approximation of the inverse of the Hessian.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array (2D)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.lineSearch">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">lineSearch</code><span class="sig-paren">(</span><em class="sig-param">fct</em>, <em class="sig-param">x</em>, <em class="sig-param">f</em>, <em class="sig-param">g</em>, <em class="sig-param">d</em>, <em class="sig-param">alpha0=1.0</em>, <em class="sig-param">beta1=0.0001</em>, <em class="sig-param">beta2=0.99</em>, <em class="sig-param">lbd=2.0</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.lineSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a step along a direction that satisfies both Wolfe conditions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fct</strong> (<a class="reference internal" href="#biogeme.optimization.functionToMinimize" title="biogeme.optimization.functionToMinimize"><em>optimization.functionToMinimize</em></a>) – object to calculate the objective function and its derivatives.</p></li>
<li><p><strong>x</strong> (<em>numpy.array</em>) – current iterate.</p></li>
<li><p><strong>d</strong> (<em>numpy.array</em>) – descent direction.</p></li>
<li><p><strong>alpha0</strong> (<em>float</em>) – first step to test.</p></li>
<li><p><strong>beta1</strong> (<em>float</em>) – parameter of the first Wolfe condition.</p></li>
<li><p><strong>beta2</strong> (<em>float</em>) – parameter of the second Wolfe condition.</p></li>
<li><p><strong>lbd</strong> (<em>float</em>) – expansion factor for a short step.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a step verifing both Wolfe conditions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if lbd <span class="math notranslate nohighlight">\(\leq\)</span> 1</p></li>
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if alpha0 <span class="math notranslate nohighlight">\(\leq\)</span> 0</p></li>
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if beta1 <span class="math notranslate nohighlight">\(\geq\)</span> beta2</p></li>
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if d is not a descent direction</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.newtonLineSearch">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">newtonLineSearch</code><span class="sig-paren">(</span><em class="sig-param">fct</em>, <em class="sig-param">x0</em>, <em class="sig-param">eps=6.06273418136464e-06</em>, <em class="sig-param">maxiter=100</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.newtonLineSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Newton method with inexact line search (Wolfe conditions)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fct</strong> (<a class="reference internal" href="#biogeme.optimization.functionToMinimize" title="biogeme.optimization.functionToMinimize"><em>optimization.functionToMinimize</em></a>) – object to calculate the objective function and its derivatives.</p></li>
<li><p><strong>x0</strong> (<em>numpy.array</em>) – starting point</p></li>
<li><p><strong>eps</strong> (<em>float</em>) – the algorithm stops when this precision is reached. Default: <span class="math notranslate nohighlight">\(\varepsilon^{\frac{1}{3}}\)</span></p></li>
<li><p><strong>maxiter</strong> (<em>int</em>) – the algorithm stops if this number of iterations is reached. Defaut: 100</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>x, nit, nf, diagnostic where</p>
<ul class="simple">
<li><p>x is the solution generated by the algorithm,</p></li>
<li><p>nit is the number of iterations,</p></li>
<li><p>nf is the number of function evaluations,</p></li>
<li><p>diagnostic is the diagnostic provided by the algorithm.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array, int, int, string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.newtonLineSearchForBiogeme">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">newtonLineSearchForBiogeme</code><span class="sig-paren">(</span><em class="sig-param">fct</em>, <em class="sig-param">initBetas</em>, <em class="sig-param">fixedBetas</em>, <em class="sig-param">betaIds</em>, <em class="sig-param">bounds</em>, <em class="sig-param">parameters=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.newtonLineSearchForBiogeme" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimization interface for Biogeme, based on Newton method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fct</strong> (<a class="reference internal" href="#biogeme.optimization.functionToMinimize" title="biogeme.optimization.functionToMinimize"><em>optimization.functionToMinimize</em></a>) – object to calculate the objective function and its derivatives.</p></li>
<li><p><strong>initBetas</strong> (<em>numpy.array</em>) – initial value of the parameters.</p></li>
<li><p><strong>fixedBetas</strong> (<em>numpy.array</em>) – betas that stay fixed suring the optimization.</p></li>
<li><p><strong>betaIds</strong> (<em>numpy.array</em>) – internal identifiers of the non fixed betas.</p></li>
<li><p><strong>bounds</strong> (<em>list</em><em>(</em><em>tuples</em><em>)</em>) – list of tuples (ell,u) containing the lower and upper bounds for each free parameter. Note that this algorithm does not support bound constraints. Therefore, all the bounds must be None.</p></li>
<li><p><strong>parameters</strong> (<em>dict</em><em>(</em><em>string:float</em><em> or </em><em>int</em><em>)</em>) – dict of parameters to be transmitted to the  optimization routine:             
- tolerance: when the relative gradient is below that threshold, the algorithm has reached convergence (default:  <span class="math notranslate nohighlight">\(\varepsilon^{\frac{1}{3}}\)</span>);
- maxiter: the maximum number of iterations (default: 100).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>tuple x, nit, nfev, message, where</p>
<ul class="simple">
<li><p>x is the solution found,</p></li>
<li><p>nit is the number of iterations performed,</p></li>
<li><p>nfev is the number of time that the objective function has been evaluated, and</p></li>
<li><p>message is the diagnostic provided by the algorithm.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array, int, int, string</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if bounds are imposed on the variables.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.newtonTrustRegion">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">newtonTrustRegion</code><span class="sig-paren">(</span><em class="sig-param">fct</em>, <em class="sig-param">x0</em>, <em class="sig-param">delta0=1.0</em>, <em class="sig-param">eps=6.06273418136464e-06</em>, <em class="sig-param">dl=False</em>, <em class="sig-param">maxiter=1000</em>, <em class="sig-param">eta1=0.01</em>, <em class="sig-param">eta2=0.9</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.newtonTrustRegion" title="Permalink to this definition">¶</a></dt>
<dd><p>Newton method with trust region</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fct</strong> (<a class="reference internal" href="#biogeme.optimization.functionToMinimize" title="biogeme.optimization.functionToMinimize"><em>optimization.functionToMinimize</em></a>) – object to calculate the objective function and its derivatives.</p></li>
<li><p><strong>x0</strong> (<em>numpy.array</em>) – starting point</p></li>
<li><p><strong>delta0</strong> (<em>float</em>) – initial radius of the trust region. Default: 100.</p></li>
<li><p><strong>eps</strong> (<em>float</em>) – the algorithm stops when this precision is reached. Default: <span class="math notranslate nohighlight">\(\varepsilon^{\frac{1}{3}}\)</span></p></li>
<li><p><strong>dl</strong> (<em>bool</em>) – If True, the Dogleg method is used to solve the
trut region subproblem. If False, the truncated conjugate
gradient is used. Default: False.</p></li>
<li><p><strong>maxiter</strong> (<em>int</em>) – the algorithm stops if this number of iterations is reached. Default: 1000.</p></li>
<li><p><strong>eta1</strong> (<em>float</em>) – threshold for failed iterations. Default: 0.01.</p></li>
<li><p><strong>eta2</strong> (<em>float</em>) – threshold for very successful iterations. Default 0.9.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple x, nit, nfev, message, where x is the solution found,
nit is the number of iterations performed, nfev is the
number of time that the objective function has been
evaluated, and message is the diagnostic provided by the
algorithm.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpay.array, int, int, string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.newtonTrustRegionForBiogeme">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">newtonTrustRegionForBiogeme</code><span class="sig-paren">(</span><em class="sig-param">fct</em>, <em class="sig-param">initBetas</em>, <em class="sig-param">fixedBetas</em>, <em class="sig-param">betaIds</em>, <em class="sig-param">bounds</em>, <em class="sig-param">parameters=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.newtonTrustRegionForBiogeme" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimization interface for Biogeme, based on Newton method with TR.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fct</strong> (<a class="reference internal" href="#biogeme.optimization.functionToMinimize" title="biogeme.optimization.functionToMinimize"><em>optimization.functionToMinimize</em></a>) – object to calculate the objective function and its derivatives.</p></li>
<li><p><strong>initBetas</strong> (<em>numpy.array</em>) – initial value of the parameters.</p></li>
<li><p><strong>fixedBetas</strong> (<em>numpy.array</em>) – betas that stay fixed suring the optimization.</p></li>
<li><p><strong>betaIds</strong> (<em>numpy.array</em>) – internal identifiers of the non fixed betas.</p></li>
<li><p><strong>bounds</strong> (<em>list</em><em>(</em><em>tuples</em><em>)</em>) – list of tuples (ell,u) containing the lower and upper bounds for each free parameter. Note that this algorithm does not support bound constraints. Therefore, all the bounds must be None.</p></li>
<li><p><strong>parameters</strong> (<em>dict</em><em>(</em><em>string:float</em><em> or </em><em>int</em><em>)</em>) – <p>dict of parameters to be transmitted to the  optimization routine:             
- tolerance: when the relative gradient is below that threshold, the algorithm has reached convergence (default:  <span class="math notranslate nohighlight">\(\varepsilon^{\frac{1}{3}}\)</span>);
- maxiter: the maximum number of iterations (default: 100).
- dogleg: if True, the trust region subproblem is solved using</p>
<blockquote>
<div><p>the Dogleg method. If False, it is solved using the 
truncated conjugate gradient method (default: False).</p>
</div></blockquote>
<ul>
<li><p>radius: the initial radius of the truat region (default: 1.0).</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>tuple x, nit, nfev, message, where</p>
<ul class="simple">
<li><p>x is the solution found,</p></li>
<li><p>nit is the number of iterations performed,</p></li>
<li><p>nfev is the number of time that the objective function has been evaluated, and</p></li>
<li><p>message is the diagnostic provided by the algorithm.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array, int, int, string</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if bounds are imposed on the variables.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.relativeGradient">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">relativeGradient</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">f</em>, <em class="sig-param">g</em>, <em class="sig-param">typx</em>, <em class="sig-param">typf</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.relativeGradient" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the relative gradients.</p>
<p>It is typically used for stopping criteria.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>numpy.array</em>) – current iterate.</p></li>
<li><p><strong>f</strong> (<em>float</em>) – value of f(x)</p></li>
<li><p><strong>g</strong> (<em>numpy.array</em>) – <span class="math notranslate nohighlight">\(\nabla f(x)\)</span>, gradient of f at x</p></li>
<li><p><strong>typx</strong> (<em>numpy.array</em>) – typical value for x.</p></li>
<li><p><strong>typf</strong> (<em>float</em>) – typical value for f.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>relative gradient</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\max_{i=1,\ldots,n}\frac{(\nabla f(x))_i \max(x_i,\text{typx}_i)}{\max(|f(x)|, \text{typf})}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.schnabelEskow">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">schnabelEskow</code><span class="sig-paren">(</span><em class="sig-param">A</em>, <em class="sig-param">tau=6.06273418136464e-06</em>, <em class="sig-param">taubar=3.6756745753887175e-11</em>, <em class="sig-param">mu=0.1</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.schnabelEskow" title="Permalink to this definition">¶</a></dt>
<dd><p>Modified Cholesky factorization by <a class="reference external" href="https://doi.org/10.1137/s105262349833266x">Schnabel and Eskow (1999)</a>.</p>
<p>If the matrix is ‘safely’ positive definite, the output is the
classical Cholesky factor. If not, the diagonal elements are
inflated in order to make it positive definite. The factor <span class="math notranslate nohighlight">\(L\)</span>
is such that <span class="math notranslate nohighlight">\(A + E = PLL^TP^T\)</span>, where <span class="math notranslate nohighlight">\(E\)</span> is a diagonal
matrix contaninig the terms added to the diagonal, <span class="math notranslate nohighlight">\(P\)</span> is a
permutation matrix, and <span class="math notranslate nohighlight">\(L\)</span> is w lower triangular matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – matrix to factorize. Must be square and symmetric.</p></li>
<li><p><strong>tau</strong> (<em>float</em>) – tolerance factor. Default: <span class="math notranslate nohighlight">\(\varepsilon^{\frac{1}{3}}\)</span>. See <a class="reference external" href="https://doi.org/10.1137/s105262349833266x">Schnabel and Eskow (1999)</a></p></li>
<li><p><strong>taubar</strong> (<em>float</em>) – tolerance factor. Default: <span class="math notranslate nohighlight">\(\varepsilon^{\frac{2}{3}}\)</span>. See <a class="reference external" href="https://doi.org/10.1137/s105262349833266x">Schnabel and Eskow (1999)</a></p></li>
<li><p><strong>mu</strong> (<em>float</em>) – tolerance factor. Default: 0.1.  See <a class="reference external" href="https://doi.org/10.1137/s105262349833266x">Schnabel and Eskow (1999)</a></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple <span class="math notranslate nohighlight">\(L\)</span>, <span class="math notranslate nohighlight">\(E\)</span>, <span class="math notranslate nohighlight">\(P\)</span>, where <span class="math notranslate nohighlight">\(A + E = PLL^TP^T\)</span>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array, numpy.array, numpy.array</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if the matrix A is not square.</p></li>
<li><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if the matrix A is not symmetric.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.scipy">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">scipy</code><span class="sig-paren">(</span><em class="sig-param">fct</em>, <em class="sig-param">initBetas</em>, <em class="sig-param">fixedBetas</em>, <em class="sig-param">betaIds</em>, <em class="sig-param">bounds</em>, <em class="sig-param">parameters=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.scipy" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimization interface for Biogeme, based on the scipy minimize function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fct</strong> (<a class="reference internal" href="#biogeme.optimization.functionToMinimize" title="biogeme.optimization.functionToMinimize"><em>optimization.functionToMinimize</em></a>) – object to calculate the objective function and its derivatives.</p></li>
<li><p><strong>initBetas</strong> (<em>numpy.array</em>) – initial value of the beta parameters</p></li>
<li><p><strong>fixedBetas</strong> (<em>numpy.array</em>) – betas that stay fixed suring the optimization</p></li>
<li><p><strong>betaIds</strong> (<em>numpy.array</em>) – internal identifiers of the non fixed betas</p></li>
<li><p><strong>bounds</strong> (<em>list</em><em>(</em><em>tuple</em><em>)</em>) – list of tuples (ell,u) containing the lower and upper bounds
for each free parameter</p></li>
<li><p><strong>parameters</strong> – dict of parameters to be transmitted to the 
optimization routine. See the <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/optimize.html">scipy</a> documentation.</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>tuple x, nit, nfev,message, where x is the solution found,
nit is the number of iterations performed, nfev is the
number of time that the objective function has been
evaluated, and message is the diagnostic provided by the
algorithm.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpay.array, int, int, string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.truncatedConjugateGradient">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">truncatedConjugateGradient</code><span class="sig-paren">(</span><em class="sig-param">g</em>, <em class="sig-param">H</em>, <em class="sig-param">delta</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.truncatedConjugateGradient" title="Permalink to this definition">¶</a></dt>
<dd><p>Find an approximation of the trust region subproblem using the 
truncated conjugate gradient method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> (<em>numpy.array</em>) – gradient of the quadratic model.</p></li>
<li><p><strong>H</strong> (<em>numpy.array</em>) – hessian of the quadrartic model.</p></li>
<li><p><strong>delta</strong> (<em>float</em>) – radius of the trust region.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>d, diagnostic, where</p>
<ul class="simple">
<li><p>d is the approximate solution of the trust region subproblem,</p></li>
<li><p>diagnostic is the nature of the solution:</p>
<ul>
<li><p>1 for convergence,</p></li>
<li><p>2 if out of the trust region,</p></li>
<li><p>3 if negative curvature detected.</p></li>
<li><p>4 if a numerical problem has been encountered</p></li>
</ul>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array, int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.optimization.trustRegionIntersection">
<code class="sig-prename descclassname">biogeme.optimization.</code><code class="sig-name descname">trustRegionIntersection</code><span class="sig-paren">(</span><em class="sig-param">dc</em>, <em class="sig-param">d</em>, <em class="sig-param">delta</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.optimization.trustRegionIntersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the intersection with the boundary of the trust region.</p>
<p>Consider a trust region of radius <span class="math notranslate nohighlight">\(\delta\)</span>, centered at
<span class="math notranslate nohighlight">\(\hat{x}\)</span>. Let <span class="math notranslate nohighlight">\(x_c\)</span> be in the trust region, and
<span class="math notranslate nohighlight">\(d_c = x_c - \hat{x}\)</span>, so that <span class="math notranslate nohighlight">\(\|d_c\| \leq
\delta\)</span>. Let <span class="math notranslate nohighlight">\(x_d\)</span> be out of the trust region, and
<span class="math notranslate nohighlight">\(d_d = x_d - \hat{x}\)</span>, so that <span class="math notranslate nohighlight">\(\|d_d\| \geq
\delta\)</span>.  We calculate <span class="math notranslate nohighlight">\(\lambda\)</span> such that</p>
<div class="math notranslate nohighlight">
\[\| d_c + \lambda (d_d - d_c)\| = \delta\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dc</strong> (<em>numpy.array</em>) – xc-xhat.</p></li>
<li><p><strong>d</strong> (<em>numpy.array</em>) – dd - dc.</p></li>
<li><p><strong>delta</strong> (<em>float</em>) – radius of the trust region.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><span class="math notranslate nohighlight">\(\lambda\)</span> such that <span class="math notranslate nohighlight">\(\| d_c + \lambda (d_d - d_c)\| = \delta\)</span></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-biogeme.results">
<span id="biogeme-results-module"></span><h2>biogeme.results module<a class="headerlink" href="#module-biogeme.results" title="Permalink to this headline">¶</a></h2>
<p>Implementation of class contaning and processing the estimation results.</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Tue Mar 26 16:50:01 2019</p>
</dd>
</dl>
<dl class="class">
<dt id="biogeme.results.beta">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.results.</code><code class="sig-name descname">beta</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">value</em>, <em class="sig-param">bounds</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.beta" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class gathering the information related to the parameters of the model</p>
<dl class="method">
<dt id="biogeme.results.beta.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">value</em>, <em class="sig-param">bounds</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.beta.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – name of the parameter.</p></li>
<li><p><strong>value</strong> (<em>float</em>) – value of the parameter.</p></li>
<li><p><strong>bounds</strong> (<em>float</em><em>,</em><em>float</em>) – tuple (l,b) with lower and upper bounds</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.beta.isBoundActive">
<code class="sig-name descname">isBoundActive</code><span class="sig-paren">(</span><em class="sig-param">threshold=1e-06</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.beta.isBoundActive" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if one of the two bound is “numerically” active.</p>
<p>Being numerically active means that the distance between the value of the parameter and one of its bounds is below the threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> – distance below which the bound is considered to be active. Default: <span class="math notranslate nohighlight">\(10^{-6}\)</span></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True is one of the two bounds is numericall y active.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.beta.setBootstrapStdErr">
<code class="sig-name descname">setBootstrapStdErr</code><span class="sig-paren">(</span><em class="sig-param">se</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.beta.setBootstrapStdErr" title="Permalink to this definition">¶</a></dt>
<dd><p>Records the robust standard error calculated by bootstrap, and calculates and records the corresponding t-statistic and p-value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>se</strong> (<em>float</em>) – standard error calculated by bootstrap.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.beta.setRobustStdErr">
<code class="sig-name descname">setRobustStdErr</code><span class="sig-paren">(</span><em class="sig-param">se</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.beta.setRobustStdErr" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Records the robust standard error, and calculates and records </dt><dd><p>the corresponding t-statistic and p-value</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>se</strong> (<em>float</em>) – robust standard error</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.beta.setStdErr">
<code class="sig-name descname">setStdErr</code><span class="sig-paren">(</span><em class="sig-param">se</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.beta.setStdErr" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Records the standard error, and calculates and records </dt><dd><p>the corresponding t-statistic and p-value</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>se</strong> (<em>float</em>) – standard error.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="biogeme.results.bioResults">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.results.</code><code class="sig-name descname">bioResults</code><span class="sig-paren">(</span><em class="sig-param">rawResults=None</em>, <em class="sig-param">pickleFile=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class managing the estimation results</p>
<dl class="method">
<dt id="biogeme.results.bioResults.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">rawResults=None</em>, <em class="sig-param">pickleFile=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rawResults</strong> (<a class="reference internal" href="#biogeme.results.rawResults" title="biogeme.results.rawResults"><em>biogeme.results.rawResults</em></a>) – object with the results of the estimation. Default: None.</p></li>
<li><p><strong>pickleFile</strong> (<em>string</em>) – name of the file containing the raw results in pickle format. Default: None.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if no data is provided.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.getBetaValues">
<code class="sig-name descname">getBetaValues</code><span class="sig-paren">(</span><em class="sig-param">myBetas=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.getBetaValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the values of the estimated parameters, by names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>myBetas</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – names of the requested parameters. If None, all
available parameters will be reported. Default: None.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict containing the values, where the keys are the names.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict(string:float)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if some requested parameters are not available.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.getBetasForSensitivityAnalysis">
<code class="sig-name descname">getBetasForSensitivityAnalysis</code><span class="sig-paren">(</span><em class="sig-param">myBetas</em>, <em class="sig-param">size=100</em>, <em class="sig-param">useBootstrap=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.getBetasForSensitivityAnalysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate draws from the distribution of the estimates, for
sensitivity analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>myBetas</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – names of the parameters for which draws are requested.</p></li>
<li><p><strong>size</strong> (<em>int</em>) – number of draws. Default: 100.</p></li>
<li><p><strong>useBootstrap</strong> (<em>bool</em>) – if True, the variance-covariance matrix
generated by the bootstrapping is used for simulation. If
False, the robust variance-covariance matrix is used. Default: False.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#biogeme.exceptions.biogemeError" title="biogeme.exceptions.biogemeError"><strong>biogeme.exceptions.biogemeError</strong></a> – if useBootstrap is True and the bootstrap matrix is not available.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>numpy table with as many rows as draws, and as many
columns as parameters.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.getBootstrapVarCovar">
<code class="sig-name descname">getBootstrapVarCovar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.getBootstrapVarCovar" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the bootstrap variance covariance matrix as a Pandas data frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bootstrap variance covariance matrix, or None if not available</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.getCorrelationResults">
<code class="sig-name descname">getCorrelationResults</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.getCorrelationResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the statistics about pairs of coefficients as a Pandas dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Pandas data frame with the correlation results</p>
</dd>
<dt class="field-even">Rtpye</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.getEstimatedParameters">
<code class="sig-name descname">getEstimatedParameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.getEstimatedParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Gather the estimated parameters and the corresponding statistics in
a Pandas dataframe.</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">return</dt>
<dd class="field-odd"><p>Pandas dataframe with the results</p>
</dd>
<dt class="field-even">rtype</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.getGeneralStatistics">
<code class="sig-name descname">getGeneralStatistics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.getGeneralStatistics" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the results in a dict</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dict with the results. The keys describe each
content. Each element is a tuple, with the value and its
preferred formatting.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;Init log likelihood&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">115.30029248549191</span><span class="p">,</span> <span class="s1">&#39;.7g&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict(string:float,string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.getHtml">
<code class="sig-name descname">getHtml</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.getHtml" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the results coded in HTML</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>HTML code</p>
</dd>
<dt class="field-even">Rtpye</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.getLaTeX">
<code class="sig-name descname">getLaTeX</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.getLaTeX" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the results coded in LaTeX</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>LaTeX code</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.getRobustVarCovar">
<code class="sig-name descname">getRobustVarCovar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.getRobustVarCovar" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the robust variance covariance matrix as a Pandas data frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>robust variance covariance matrix</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.getVarCovar">
<code class="sig-name descname">getVarCovar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.getVarCovar" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the Rao-Cramer variance covariance matrix as a Pandas data frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Rao-Cramer variance covariance matrix</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.writeHtml">
<code class="sig-name descname">writeHtml</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.writeHtml" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the results in an HTML file.</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.writeLaTeX">
<code class="sig-name descname">writeLaTeX</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.writeLaTeX" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the results in a LaTeX file.</p>
</dd></dl>

<dl class="method">
<dt id="biogeme.results.bioResults.writePickle">
<code class="sig-name descname">writePickle</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.bioResults.writePickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the data in a file in pickle format.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>name of the file.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="biogeme.results.calcPValue">
<code class="sig-prename descclassname">biogeme.results.</code><code class="sig-name descname">calcPValue</code><span class="sig-paren">(</span><em class="sig-param">t</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.calcPValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the p value of a parameter from its t-statistic.</p>
<p>The formula is</p>
<div class="math notranslate nohighlight">
\[2(1-\Phi(|t|)\]</div>
<p>where <span class="math notranslate nohighlight">\(\Phi(\cdot)\)</span> is the CDF of a normal distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>t</strong> – t-statistics</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>float</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>p-value</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="biogeme.results.rawResults">
<em class="property">class </em><code class="sig-prename descclassname">biogeme.results.</code><code class="sig-name descname">rawResults</code><span class="sig-paren">(</span><em class="sig-param">theModel</em>, <em class="sig-param">betaValues</em>, <em class="sig-param">fgHb</em>, <em class="sig-param">bootstrap=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.rawResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class containing the raw results from the estimation</p>
<dl class="method">
<dt id="biogeme.results.rawResults.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">theModel</em>, <em class="sig-param">betaValues</em>, <em class="sig-param">fgHb</em>, <em class="sig-param">bootstrap=None</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.results.rawResults.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theModel</strong> (<a class="reference internal" href="#biogeme.biogeme.BIOGEME" title="biogeme.biogeme.BIOGEME"><em>biogeme.BIOGEME</em></a>) – object with the model</p></li>
<li><p><strong>betaValues</strong> (<em>list</em><em>(</em><em>float</em><em>)</em>) – list containing the estimated values of the parameters</p></li>
<li><p><strong>fgHb</strong> (<em>float</em><em>,</em><em>numpy.array</em><em>, </em><em>numpy.array</em><em>, </em><em>numpy.array</em>) – <p>tuple f,g,H,bhhh containing</p>
<ul>
<li><p>f: the value of the function,</p></li>
<li><p>g: the gradient,</p></li>
<li><p>H: the second derivative matrix,</p></li>
<li><p>bhhh: the BHHH matrix.</p></li>
</ul>
</p></li>
<li><p><strong>bootstrap</strong> (<em>numpy.array</em>) – <p>output of the bootstrapping. numpy array, of size B x K,  where</p>
<ul>
<li><p>B is the number of bootstrap iterations</p></li>
<li><p>K is the number of parameters to estimate</p>
<blockquote>
<div><p>Default: None.</p>
</div></blockquote>
</li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-biogeme.tools">
<span id="biogeme-tools-module"></span><h2>biogeme.tools module<a class="headerlink" href="#module-biogeme.tools" title="Permalink to this headline">¶</a></h2>
<p>Implements some useful functions</p>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>Michel Bierlaire</p>
</dd>
<dt class="field-even">date</dt>
<dd class="field-even"><p>Sun Apr 14 10:46:10 2019</p>
</dd>
</dl>
<dl class="function">
<dt id="biogeme.tools.calculatePrimeNumbers">
<code class="sig-prename descclassname">biogeme.tools.</code><code class="sig-name descname">calculatePrimeNumbers</code><span class="sig-paren">(</span><em class="sig-param">upperBound</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.tools.calculatePrimeNumbers" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate prime numbers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>upperBound</strong> (<em>int</em>) – prime numbers up to this value will be computed</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array with prime numbers</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(int)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.tools.checkDerivatives">
<code class="sig-prename descclassname">biogeme.tools.</code><code class="sig-name descname">checkDerivatives</code><span class="sig-paren">(</span><em class="sig-param">theFunction</em>, <em class="sig-param">x</em>, <em class="sig-param">names=None</em>, <em class="sig-param">logg=False</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.tools.checkDerivatives" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies the analytical derivatives of a function by comparing them with finite difference approximations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theFunction</strong> (<em>function</em>) – <p>A function object that takes a vector as an  argument, and returns a tuple.</p>
<ul>
<li><p>The first element of the tuple is the value of the function <span class="math notranslate nohighlight">\(f\)</span>,</p></li>
<li><p>the second is the gradient of the function,</p></li>
<li><p>the third is the hessian.</p></li>
</ul>
</p></li>
<li><p><strong>x</strong> (<em>numpy.array</em>) – arguments of the function</p></li>
<li><p><strong>names</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – the names of the entries of x (for reporting).</p></li>
<li><p><strong>logg</strong> (<em>bool</em>) – if True, messages will be displayed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>tuple f,g,h,gdiff,hdiff where</p>
<ul class="simple">
<li><p>f is the value of the function at x,</p></li>
<li><p>g is the analytical gradient,</p></li>
<li><p>h is the analytical hessian,</p></li>
<li><p>gdiff is the difference between the analytical gradient and the finite difference approximation</p></li>
<li><p>hdiff is the difference between the analytical hessian and the finite difference approximation</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float, numpy.array,numpy.array,  numpy.array,numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.tools.countNumberOfGroups">
<code class="sig-prename descclassname">biogeme.tools.</code><code class="sig-name descname">countNumberOfGroups</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">column</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.tools.countNumberOfGroups" title="Permalink to this definition">¶</a></dt>
<dd><p>This function counts the number of groups of same value in a column. 
For instance: 1,2,2,3,3,3,4,1,1  would give 5</p>
</dd></dl>

<dl class="function">
<dt id="biogeme.tools.findiff_H">
<code class="sig-prename descclassname">biogeme.tools.</code><code class="sig-name descname">findiff_H</code><span class="sig-paren">(</span><em class="sig-param">theFunction</em>, <em class="sig-param">x</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.tools.findiff_H" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the hessian of a function <span class="math notranslate nohighlight">\(f\)</span> using finite differences</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theFunction</strong> (<em>function</em>) – A function object that takes a vector as an
argument, and returns a tuple. The first
element of the tuple is the value of the
function <span class="math notranslate nohighlight">\(f\)</span>, and the second is the
gradient of the function.  The other elements
are not used.</p></li>
<li><p><strong>x</strong> (<em>numpy.array</em>) – argument of the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy matrix containing the hessian calculated by finite differences.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.tools.findiff_g">
<code class="sig-prename descclassname">biogeme.tools.</code><code class="sig-name descname">findiff_g</code><span class="sig-paren">(</span><em class="sig-param">theFunction</em>, <em class="sig-param">x</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.tools.findiff_g" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the gradient of a function :math`f` using finite differences</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theFunction</strong> (<em>function</em>) – A function object that takes a vector as an
argument, and returns a tuple. The first
element of the tuple is the value of the
function <span class="math notranslate nohighlight">\(f\)</span>. The other elements are not
used.</p></li>
<li><p><strong>x</strong> (<em>numpy.array</em>) – argument of the function</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy vector, same dimension as x, containing the gradient
calculated by finite differences.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.tools.getPrimeNumbers">
<code class="sig-prename descclassname">biogeme.tools.</code><code class="sig-name descname">getPrimeNumbers</code><span class="sig-paren">(</span><em class="sig-param">n</em><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.tools.getPrimeNumbers" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a given number of prime numbers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> (<em>int</em>) – number of primes that are requested</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array with prime numbers</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(int)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-biogeme.version">
<span id="biogeme-version-module"></span><h2>biogeme.version module<a class="headerlink" href="#module-biogeme.version" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="biogeme.version.getHtml">
<code class="sig-prename descclassname">biogeme.version.</code><code class="sig-name descname">getHtml</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.version.getHtml" title="Permalink to this definition">¶</a></dt>
<dd><p>Package information in HTML format</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>HTML code.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.version.getLaTeX">
<code class="sig-prename descclassname">biogeme.version.</code><code class="sig-name descname">getLaTeX</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.version.getLaTeX" title="Permalink to this definition">¶</a></dt>
<dd><p>Package information in LaTeX format</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>LaTeX comments</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.version.getText">
<code class="sig-prename descclassname">biogeme.version.</code><code class="sig-name descname">getText</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.version.getText" title="Permalink to this definition">¶</a></dt>
<dd><p>Package information in text format</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>package information</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="biogeme.version.getVersion">
<code class="sig-prename descclassname">biogeme.version.</code><code class="sig-name descname">getVersion</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#biogeme.version.getVersion" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Version of the software</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>version number, and the release.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to Biogeme’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Michel Bierlaire

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>